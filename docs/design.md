# ç”»åƒãƒ“ãƒ¥ãƒ¼ã‚¢ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³è¨­è¨ˆæ›¸ï¼ˆãƒ‰ãƒ©ãƒ•ãƒˆï¼‰

## 1. ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦

### 1.1 ç›®çš„
ãƒ­ãƒ¼ã‚«ãƒ«PCå†…ã®ç”»åƒãƒ•ã‚©ãƒ«ãƒ€ã‚’ã‚µãƒ ãƒã‚¤ãƒ«ä»˜ãã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã§ç®¡ç†ã—ã€å¿«é©ã«é–²è¦§ã§ãã‚‹ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã€‚

### 1.2 ä¸»è¦æ©Ÿèƒ½
- **ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«ç®¡ç†**: ç”¨é€”åˆ¥ã«è¤‡æ•°ã®ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«ã‚’åˆ‡ã‚Šæ›¿ãˆã¦ä½¿ç”¨
- **ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ç®¡ç†**: ãƒ•ã‚©ãƒ«ãƒ€ã‚’ã‚µãƒ ãƒã‚¤ãƒ«ä»˜ãã‚«ãƒ¼ãƒ‰ã§ä¸€è¦§ç®¡ç†
- **ç”»åƒãƒ“ãƒ¥ãƒ¼ã‚¢**: ãƒ•ã‚©ãƒ«ãƒ€å†…ã®ç”»åƒã‚’å¿«é©ã«é–²è¦§
- **ã‚¯ãƒ­ã‚¹ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ **: Windows / macOS / Linux å¯¾å¿œ

---

## 2. æ©Ÿèƒ½è¦ä»¶

### 2.1 ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ãƒšãƒ¼ã‚¸

| æ©Ÿèƒ½ | èª¬æ˜ | å„ªå…ˆåº¦ |
|------|------|--------|
| ãƒ•ã‚©ãƒ«ãƒ€è¿½åŠ  | ãƒ•ã‚©ãƒ«ãƒ€ã‚’é¸æŠã—ã¦ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã«è¿½åŠ  | å¿…é ˆ |
| ã‚µãƒ ãƒã‚¤ãƒ«é¸æŠ | ä»»æ„ã®ç”»åƒãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚µãƒ ãƒã‚¤ãƒ«ã«è¨­å®š | å¿…é ˆ |
| ã‚¿ã‚¤ãƒˆãƒ«ç·¨é›† | ã‚«ãƒ¼ãƒ‰ã®ã‚¿ã‚¤ãƒˆãƒ«ã‚’ç·¨é›† | å¿…é ˆ |
| é †åºå…¥ã‚Œæ›¿ãˆ | ãƒ‰ãƒ©ãƒƒã‚°&ãƒ‰ãƒ­ãƒƒãƒ—ã§ã‚«ãƒ¼ãƒ‰ã®é †åºã‚’å¤‰æ›´ | å¿…é ˆ |
| ã‚«ãƒ¼ãƒ‰å‰Šé™¤ | ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‹ã‚‰ã‚«ãƒ¼ãƒ‰ã‚’å‰Šé™¤ï¼ˆå…ƒãƒ•ã‚©ãƒ«ãƒ€ã¯ä¿æŒï¼‰ | å¿…é ˆ |
| æ¤œç´¢/ãƒ•ã‚£ãƒ«ã‚¿ | ã‚¿ã‚¤ãƒˆãƒ«ã§ã‚«ãƒ¼ãƒ‰ã‚’çµã‚Šè¾¼ã¿ | ä»»æ„ |
| ã‚¿ã‚°ä»˜ã‘ | ã‚«ãƒ¼ãƒ‰ã«ã‚¿ã‚°ã‚’ä»˜ä¸ã—ã¦åˆ†é¡ | ä»»æ„ |

### 2.2 ç”»åƒãƒ“ãƒ¥ãƒ¼ã‚¢

| æ©Ÿèƒ½ | èª¬æ˜ | å„ªå…ˆåº¦ |
|------|------|--------|
| ç”»åƒè¡¨ç¤º | é¸æŠãƒ•ã‚©ãƒ«ãƒ€å†…ã®ç”»åƒã‚’è¡¨ç¤º | å¿…é ˆ |
| ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ | å‰å¾Œã®ç”»åƒã«ç§»å‹•ï¼ˆã‚­ãƒ¼ãƒœãƒ¼ãƒ‰/ã‚¯ãƒªãƒƒã‚¯ï¼‰ | å¿…é ˆ |
| ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ãƒªã‚µã‚¤ã‚º | ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã‚µã‚¤ã‚ºã®æ‹¡å¤§/ç¸®å° | å¿…é ˆ |
| ãƒ•ã‚£ãƒƒãƒˆè¡¨ç¤º | ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã‚µã‚¤ã‚ºã«åˆã‚ã›ã¦è¡¨ç¤º | å¿…é ˆ |
| æ°´å¹³åè»¢ï¼ˆH-Flipï¼‰ | ç”»åƒã‚’å·¦å³åè»¢ã—ã¦è¡¨ç¤ºï¼ˆãƒˆã‚°ãƒ«ï¼‰ | å¿…é ˆ |
| ã‚·ãƒ£ãƒƒãƒ•ãƒ«å†ç”Ÿ | ç”»åƒã®è¡¨ç¤ºé †ã‚’ãƒ©ãƒ³ãƒ€ãƒ åŒ–ï¼ˆãƒˆã‚°ãƒ«ï¼‰ | å¿…é ˆ |
| ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã‚³ãƒ”ãƒ¼ | ç¾åœ¨ã®ç”»åƒã‚’ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ”ãƒ¼ | å¿…é ˆ |
| ãƒ‘ã‚¹ã‚³ãƒ”ãƒ¼ | ç¾åœ¨ã®ç”»åƒã®ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹ã‚’ã‚³ãƒ”ãƒ¼ | å¿…é ˆ |
| ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆãƒ¡ãƒ‹ãƒ¥ãƒ¼ | å³ã‚¯ãƒªãƒƒã‚¯ã¾ãŸã¯Spaceã‚­ãƒ¼ã§ãƒ¡ãƒ‹ãƒ¥ãƒ¼è¡¨ç¤º | å¿…é ˆ |
| ç”»åƒæƒ…å ±è¡¨ç¤º | ãƒ•ã‚¡ã‚¤ãƒ«åã€ã‚µã‚¤ã‚ºã€è§£åƒåº¦ç­‰ | ä»»æ„ |
| ã‚¹ãƒ©ã‚¤ãƒ‰ã‚·ãƒ§ãƒ¼ | è‡ªå‹•ã§ç”»åƒã‚’åˆ‡ã‚Šæ›¿ãˆ | ä»»æ„ |

### 2.3 ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«æ©Ÿèƒ½

| æ©Ÿèƒ½ | èª¬æ˜ | å„ªå…ˆåº¦ |
|------|------|--------|
| ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«é¸æŠ | èµ·å‹•æ™‚ã«å±¥æ­´ãƒªã‚¹ãƒˆã¾ãŸã¯ãƒ•ã‚¡ã‚¤ãƒ«ãƒ€ã‚¤ã‚¢ãƒ­ã‚°ã‹ã‚‰é¸æŠ | å¿…é ˆ |
| ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«åˆ‡ã‚Šæ›¿ãˆ | ã‚¢ãƒ—ãƒªå†…ã§åˆ¥ã®ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«ã«åˆ‡ã‚Šæ›¿ãˆ | å¿…é ˆ |
| æ–°è¦ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«ä½œæˆ | ç©ºã®ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆ | å¿…é ˆ |
| åˆ¥åä¿å­˜ | ç¾åœ¨ã®ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«ã‚’åˆ¥ãƒ•ã‚¡ã‚¤ãƒ«ã¨ã—ã¦ä¿å­˜ | å¿…é ˆ |
| æœ€è¿‘ä½¿ç”¨ã—ãŸå±¥æ­´ | æœ€è¿‘é–‹ã„ãŸãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«ã®å±¥æ­´ã‚’ä¿æŒ | å¿…é ˆ |

### 2.4 å…±é€šæ©Ÿèƒ½

| æ©Ÿèƒ½ | èª¬æ˜ | å„ªå…ˆåº¦ |
|------|------|--------|
| çŠ¶æ…‹ä¿å­˜ãƒ»å¾©å…ƒ | çµ‚äº†æ™‚ã®çŠ¶æ…‹ã‚’è¨˜æ†¶ã—æ¬¡å›èµ·å‹•æ™‚ã«å¾©å…ƒï¼ˆãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«ã”ã¨ï¼‰ | å¿…é ˆ |
| ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰ | ãƒ©ã‚¤ãƒˆ/ãƒ€ãƒ¼ã‚¯ãƒ†ãƒ¼ãƒåˆ‡ã‚Šæ›¿ãˆ | ä»»æ„ |
| è¨­å®šç”»é¢ | å„ç¨®è¨­å®šã®å¤‰æ›´ | ä»»æ„ |
| ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆ | ä¸»è¦æ“ä½œã®ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆ | å¿…é ˆ |

### 2.5 çŠ¶æ…‹ä¿å­˜ãƒ»å¾©å…ƒã®è©³ç´°

çŠ¶æ…‹ã¯ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«ãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆ.ivprofileï¼‰ã«ä¿å­˜ã•ã‚Œã€ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«ã”ã¨ã«ç‹¬ç«‹ã—ã¦ç®¡ç†ã•ã‚Œã‚‹ã€‚

**çµ‚äº†æ™‚ã®ä¿å­˜å†…å®¹**

| çµ‚äº†æ™‚ã®ç”»é¢ | ä¿å­˜å†…å®¹ |
|-------------|---------|
| ViewerPage | è¡¨ç¤ºä¸­ã®ã‚«ãƒ¼ãƒ‰IDã€ç”»åƒã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã€ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ä½ç½®ãƒ»ã‚µã‚¤ã‚ºã€H-Flip/ShuffleçŠ¶æ…‹ |
| IndexPage | ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ä½ç½®ãƒ»ã‚µã‚¤ã‚ºã®ã¿ |
| ãƒ¢ãƒ¼ãƒ€ãƒ«è¡¨ç¤ºä¸­ | ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ä½ç½®ãƒ»ã‚µã‚¤ã‚ºã®ã¿ï¼ˆæ¬¡å›ã¯IndexPageã§èµ·å‹•ï¼‰ |

**èµ·å‹•æ™‚ã®å¾©å…ƒå‹•ä½œ**

| ä¿å­˜ã•ã‚ŒãŸçŠ¶æ…‹ | èµ·å‹•æ™‚ã®å‹•ä½œ |
|--------------|-------------|
| ViewerPage | åŒã˜ã‚«ãƒ¼ãƒ‰ãƒ»ç”»åƒä½ç½®ã§ViewerPageã‚’é–‹ã |
| IndexPage/ãƒ¢ãƒ¼ãƒ€ãƒ« | IndexPageã‚’é–‹ã |
| ä¿å­˜ãƒ‡ãƒ¼ã‚¿ãªã— | IndexPageã‚’é–‹ãï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã‚µã‚¤ã‚ºï¼‰ |

### 2.6 ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«ã®è©³ç´°

**ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«ãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆ.ivprofileï¼‰**
- JSONäº’æ›å½¢å¼ã€ä»»æ„ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ä¿å­˜å¯èƒ½
- ã‚«ãƒ¼ãƒ‰æƒ…å ±ã€ã‚¿ã‚°ã€ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦çŠ¶æ…‹ã€ãƒ“ãƒ¥ãƒ¼ã‚¢çŠ¶æ…‹ã‚’å«ã‚€
- ã‚µãƒ ãƒã‚¤ãƒ«ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã¯å«ã¾ãªã„ï¼ˆå†ç”Ÿæˆå¯èƒ½ãªãŸã‚ï¼‰

**ã‚¢ãƒ—ãƒªå…±é€šè¨­å®šï¼ˆã‚¢ãƒ—ãƒªãƒ‡ãƒ¼ã‚¿ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ä¿å­˜ï¼‰**
- æœ€è¿‘ä½¿ç”¨ã—ãŸãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«ã®å±¥æ­´ï¼ˆãƒ‘ã‚¹ã€æœ€çµ‚ä½¿ç”¨æ—¥æ™‚ï¼‰
- ã‚¢ãƒ—ãƒªå…¨ä½“ã®è¨­å®šï¼ˆãƒ†ãƒ¼ãƒç­‰ï¼‰

**èµ·å‹•æ™‚ã®ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«é¸æŠ**
- å±¥æ­´ã«å‰å›ã®ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«ãŒã‚ã‚Œã°è‡ªå‹•çš„ã«é–‹ã
- å±¥æ­´ãŒãªã„å ´åˆã¯ãƒ•ã‚¡ã‚¤ãƒ«ãƒ€ã‚¤ã‚¢ãƒ­ã‚°ã§é¸æŠ
- ã€Œæ–°è¦ä½œæˆã€ã§ç©ºã®ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆå¯èƒ½

**ã‚¨ãƒ©ãƒ¼çŠ¶æ…‹ã®ã‚«ãƒ¼ãƒ‰**
- å‚ç…§å…ˆãƒ•ã‚©ãƒ«ãƒ€ãŒå­˜åœ¨ã—ãªã„å ´åˆã€ã‚«ãƒ¼ãƒ‰ã‚’ã‚¨ãƒ©ãƒ¼çŠ¶æ…‹ã¨ã—ã¦è¡¨ç¤º
- ã‚¨ãƒ©ãƒ¼çŠ¶æ…‹ã®ã‚«ãƒ¼ãƒ‰ã¯ç·¨é›†ï¼ˆãƒ‘ã‚¹å¤‰æ›´ï¼‰ãƒ»å‰Šé™¤ã®ã¿å¯èƒ½
- ãƒ“ãƒ¥ãƒ¼ã‚¢ã§é–‹ãã“ã¨ã¯ä¸å¯

---

## 3. æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯

### 3.1 ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯
- **Tauri v2**: ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯
- **Rust**: ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ï¼ˆãƒ•ã‚¡ã‚¤ãƒ«æ“ä½œã€ç”»åƒå‡¦ç†ï¼‰
- **React 18 + TypeScript**: ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰

### 3.2 ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰
| ç”¨é€” | ãƒ©ã‚¤ãƒ–ãƒ©ãƒª |
|------|-----------|
| UIã‚¹ã‚¿ã‚¤ãƒªãƒ³ã‚° | Tailwind CSS |
| ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚° | React Router v6 |
| çŠ¶æ…‹ç®¡ç† | Zustandï¼ˆã‚»ãƒ¬ã‚¯ã‚¿ãƒ¼ã«ã¯ `useShallow` ã‚’ä½¿ç”¨ï¼‰ |
| ãƒ‰ãƒ©ãƒƒã‚°&ãƒ‰ãƒ­ãƒƒãƒ— | @dnd-kit/core, @dnd-kit/sortable |
| ã‚¢ã‚¤ã‚³ãƒ³ | Lucide React |
| ç”»åƒè¡¨ç¤º | react-zoom-pan-pinch |

**Zustand ä½¿ç”¨æ™‚ã®æ³¨æ„**: é…åˆ—ã‚„ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’è¿”ã™ã‚»ãƒ¬ã‚¯ã‚¿ãƒ¼ã¯ `useShallow` ã§ãƒ©ãƒƒãƒ—ã—ãŸã‚«ã‚¹ã‚¿ãƒ ãƒ•ãƒƒã‚¯ã¨ã—ã¦å®šç¾©ã™ã‚‹ã€‚ç›´æ¥ã‚»ãƒ¬ã‚¯ã‚¿ãƒ¼é–¢æ•°ã‚’æ¸¡ã™ã¨ç„¡é™ãƒ«ãƒ¼ãƒ—ãŒç™ºç”Ÿã™ã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹ã€‚

### 3.3 ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ï¼ˆRustï¼‰
| ç”¨é€” | ã‚¯ãƒ¬ãƒ¼ãƒˆ |
|------|---------|
| ç”»åƒå‡¦ç† | image |
| éåŒæœŸå‡¦ç† | tokio |
| ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚º | serde, serde_json |
| ãƒ€ã‚¤ã‚¢ãƒ­ã‚° | tauri-plugin-dialog |
| ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ | rusqlite ã¾ãŸã¯ tauri-plugin-sql |
| ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ | arboard |
| ãƒ•ã‚¡ã‚¤ãƒ«ç›£è¦– | notifyï¼ˆä»»æ„ï¼‰ |

---

## 4. ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£è¨­è¨ˆ

### 4.1 å…¨ä½“æ§‹æˆ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Tauri Application                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚              Frontend (WebView)                    â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚  â”‚
â”‚  â”‚  â”‚ IndexPage   â”‚  â”‚ ViewerPage  â”‚                â”‚  â”‚
â”‚  â”‚  â”‚             â”‚  â”‚             â”‚                â”‚  â”‚
â”‚  â”‚  â”‚ - Grid      â”‚  â”‚ - Display   â”‚                â”‚  â”‚
â”‚  â”‚  â”‚ - DnD       â”‚  â”‚ - Zoom      â”‚                â”‚  â”‚
â”‚  â”‚  â”‚ - Edit      â”‚  â”‚ - Navigate  â”‚                â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚  â”‚
â”‚  â”‚           â”‚              â”‚                        â”‚  â”‚
â”‚  â”‚           â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                        â”‚  â”‚
â”‚  â”‚                  â”‚ Tauri invoke()                 â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                     â”‚                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚              Backend (Rust)                        â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚
â”‚  â”‚  â”‚ Commands    â”‚  â”‚ Thumbnail   â”‚  â”‚ Database  â”‚ â”‚  â”‚
â”‚  â”‚  â”‚             â”‚  â”‚ Generator   â”‚  â”‚ (SQLite)  â”‚ â”‚  â”‚
â”‚  â”‚  â”‚ - get_cards â”‚  â”‚             â”‚  â”‚           â”‚ â”‚  â”‚
â”‚  â”‚  â”‚ - add_card  â”‚  â”‚ - generate  â”‚  â”‚ - cards   â”‚ â”‚  â”‚
â”‚  â”‚  â”‚ - get_imagesâ”‚  â”‚ - cache     â”‚  â”‚ - settingsâ”‚ â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4.2 ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼

```
[ãƒ¦ãƒ¼ã‚¶ãƒ¼æ“ä½œ]
      â”‚
      â–¼
[React Component] â”€â”€invoke()â”€â”€â–¶ [Tauri Command]
      â”‚                               â”‚
      â”‚                               â–¼
      â”‚                         [Rustå‡¦ç†]
      â”‚                               â”‚
      â”‚                               â–¼
      â”‚                         [SQLite/FS]
      â”‚                               â”‚
      â—€â”€â”€â”€â”€â”€â”€â”€â”€Result/Eventâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚
      â–¼
[Stateæ›´æ–° â†’ å†ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°]
```

---

## 5. ãƒ‡ãƒ¼ã‚¿æ§‹é€ 

### 5.1 ãƒ‡ãƒ¼ã‚¿ä¿å­˜ã®2å±¤æ§‹é€ 

ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã¯2ç¨®é¡ã®ãƒ‡ãƒ¼ã‚¿ã‚’ç®¡ç†ã™ã‚‹ï¼š

| ç¨®åˆ¥ | ä¿å­˜å…ˆ | å†…å®¹ |
|------|--------|------|
| ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ« | ä»»æ„ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªï¼ˆ.ivprofileï¼‰ | ã‚«ãƒ¼ãƒ‰ã€ã‚¿ã‚°ã€ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦çŠ¶æ…‹ |
| ã‚¢ãƒ—ãƒªå…±é€šè¨­å®š | ã‚¢ãƒ—ãƒªãƒ‡ãƒ¼ã‚¿ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª | å±¥æ­´ã€ãƒ†ãƒ¼ãƒç­‰ |

### 5.2 ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«ãƒ•ã‚¡ã‚¤ãƒ«å½¢å¼ï¼ˆ.ivprofileï¼‰

```json
{
  "version": "1.0",
  "updatedAt": "2024-01-15T10:30:00Z",
  "cards": [
    {
      "id": "uuid-1",
      "title": "ã‚¹ã‚±ãƒƒãƒç·´ç¿’ç”¨",
      "folderPath": "/path/to/folder",
      "thumbnail": "image001.jpg",
      "sortOrder": 0,
      "createdAt": "2024-01-01T00:00:00Z",
      "updatedAt": "2024-01-15T10:00:00Z"
    }
  ],
  "tags": [],
  "cardTags": [],
  "appState": {
    "lastPage": "viewer",
    "lastCardId": "uuid-1",
    "lastImageIndex": 5,
    "hFlipEnabled": false,
    "shuffleEnabled": true,
    "window": {
      "x": 100,
      "y": 100,
      "width": 1280,
      "height": 800
    }
  }
}
```

### 5.3 ã‚¢ãƒ—ãƒªå…±é€šè¨­å®šï¼ˆapp_config.jsonï¼‰

ã‚¢ãƒ—ãƒªãƒ‡ãƒ¼ã‚¿ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ä¿å­˜ã•ã‚Œã‚‹å…±é€šè¨­å®šï¼š

```json
{
  "version": "1.0",
  "recentProfiles": [
    {
      "path": "/home/user/profiles/sketch.ivprofile",
      "name": "sketch",
      "lastOpenedAt": "2024-01-15T10:30:00Z"
    },
    {
      "path": "/home/user/profiles/dev-project.ivprofile",
      "name": "dev-project",
      "lastOpenedAt": "2024-01-14T18:00:00Z"
    }
  ],
  "maxRecentProfiles": 10,
  "theme": "system"
}
```

### 5.4 TypeScriptå‹å®šç¾©

```typescript
// ã‚«ãƒ¼ãƒ‰
interface Card {
  id: string;
  title: string;
  folderPath: string;
  thumbnail: string | null;
  sortOrder: number;
  createdAt: string;
  updatedAt: string;
}

// ã‚«ãƒ¼ãƒ‰ï¼ˆæ¤œè¨¼çµæœä»˜ãï¼‰
interface CardWithStatus extends Card {
  isValid: boolean;        // ãƒ•ã‚©ãƒ«ãƒ€ãŒå­˜åœ¨ã™ã‚‹ã‹
  errorMessage?: string;   // ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ï¼ˆç„¡åŠ¹æ™‚ï¼‰
}

// ç”»åƒæƒ…å ±
interface ImageInfo {
  path: string;
  filename: string;
  width: number;
  height: number;
  size: number;        // bytes
  modifiedAt: string;
}

// ã‚µãƒ ãƒã‚¤ãƒ«ã‚°ãƒªãƒƒãƒ‰ç”¨
interface ThumbnailItem {
  path: string;
  thumbnailDataUrl: string;  // Base64 data URL
}

// ãƒ“ãƒ¥ãƒ¼ã‚¢çŠ¶æ…‹ï¼ˆãƒ©ãƒ³ã‚¿ã‚¤ãƒ ç”¨ï¼‰
interface ViewerState {
  currentCardId: string | null;
  currentIndex: number;
  images: ImageInfo[];
  shuffledIndices: number[] | null;  // ã‚·ãƒ£ãƒƒãƒ•ãƒ«æ™‚ã®ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹é…åˆ—
  hFlipEnabled: boolean;
  shuffleEnabled: boolean;
}

// ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³çŠ¶æ…‹ï¼ˆãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«å†…ã«ä¿å­˜ï¼‰
interface AppState {
  lastPage: 'index' | 'viewer';
  lastCardId: string | null;
  lastImageIndex: number;
  hFlipEnabled: boolean;
  shuffleEnabled: boolean;
  window: {
    x: number | null;
    y: number | null;
    width: number;
    height: number;
  };
}

// ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‡ãƒ¼ã‚¿ï¼ˆ.ivprofileãƒ•ã‚¡ã‚¤ãƒ«ã®å†…å®¹ï¼‰
interface ProfileData {
  version: string;
  updatedAt: string;
  cards: Card[];
  tags: Tag[];
  cardTags: CardTag[];
  appState: AppState;
}

// æœ€è¿‘ä½¿ç”¨ã—ãŸãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«
interface RecentProfile {
  path: string;           // ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«ãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒ‘ã‚¹
  name: string;           // ãƒ•ã‚¡ã‚¤ãƒ«åï¼ˆæ‹¡å¼µå­ãªã—ï¼‰
  lastOpenedAt: string;   // æœ€çµ‚ä½¿ç”¨æ—¥æ™‚
}

// ã‚¢ãƒ—ãƒªå…±é€šè¨­å®š
interface AppConfig {
  version: string;
  recentProfiles: RecentProfile[];
  maxRecentProfiles: number;
  theme: 'light' | 'dark' | 'system';
}
```

### 5.5 Rustæ§‹é€ ä½“

```rust
#[derive(Debug, Serialize, Deserialize)]
pub struct Card {
    pub id: String,
    pub title: String,
    pub folder_path: String,
    pub thumbnail: Option<String>,
    pub sort_order: i32,
    pub created_at: String,
    pub updated_at: String,
}

#[derive(Debug, Serialize, Deserialize)]
pub struct CardWithStatus {
    #[serde(flatten)]
    pub card: Card,
    pub is_valid: bool,
    pub error_message: Option<String>,
}

#[derive(Debug, Serialize, Deserialize)]
pub struct ImageInfo {
    pub path: String,
    pub filename: String,
    pub width: u32,
    pub height: u32,
    pub size: u64,
    pub modified_at: String,
}

#[derive(Debug, Serialize, Deserialize)]
pub struct WindowState {
    pub x: Option<i32>,
    pub y: Option<i32>,
    pub width: i32,
    pub height: i32,
}

#[derive(Debug, Serialize, Deserialize)]
pub struct AppState {
    pub last_page: String,           // "index" | "viewer"
    pub last_card_id: Option<String>,
    pub last_image_index: i32,
    pub h_flip_enabled: bool,
    pub shuffle_enabled: bool,
    pub window: WindowState,
}

// ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‡ãƒ¼ã‚¿ï¼ˆ.ivprofileãƒ•ã‚¡ã‚¤ãƒ«ã®å†…å®¹ï¼‰
#[derive(Debug, Serialize, Deserialize)]
pub struct ProfileData {
    pub version: String,
    pub updated_at: String,
    pub cards: Vec<Card>,
    pub tags: Vec<Tag>,
    pub card_tags: Vec<CardTag>,
    pub app_state: AppState,
}

// æœ€è¿‘ä½¿ç”¨ã—ãŸãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«
#[derive(Debug, Serialize, Deserialize)]
pub struct RecentProfile {
    pub path: String,
    pub name: String,
    pub last_opened_at: String,
}

// ã‚¢ãƒ—ãƒªå…±é€šè¨­å®š
#[derive(Debug, Serialize, Deserialize)]
pub struct AppConfig {
    pub version: String,
    pub recent_profiles: Vec<RecentProfile>,
    pub max_recent_profiles: i32,
    pub theme: String,  // "light" | "dark" | "system"
}
```

---

## 6. ç”»é¢è¨­è¨ˆ

### 6.1 ç”»é¢é·ç§»

```
                                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                    â”‚              â”‚
                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚  IndexPage   â”‚
                  â”‚                 â”‚              â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚                 â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚              â”‚  â”‚                        â”‚ ã‚«ãƒ¼ãƒ‰ã‚¯ãƒªãƒƒã‚¯
â”‚  èµ·å‹•æ™‚      â”‚â”€â”€â”¤                        â–¼
â”‚  ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ« â”‚  â”‚                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  é¸æŠ        â”‚  â”‚                 â”‚              â”‚
â”‚              â”‚  â”‚                 â”‚  ViewerPage  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚                 â”‚              â”‚
                  â”‚                 â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚                        â”‚ æˆ»ã‚‹ãƒœã‚¿ãƒ³/ESC
                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â€» å‰å›ã®ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«ãŒã‚ã‚Œã°è‡ªå‹•çš„ã«IndexPageã¾ãŸã¯ViewerPageã¸
â€» ã‚¢ãƒ—ãƒªå†…ã‹ã‚‰ã‚‚ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«åˆ‡ã‚Šæ›¿ãˆå¯èƒ½ï¼ˆIndexPageãƒ˜ãƒƒãƒ€ãƒ¼ï¼‰
```

### 6.2 ãƒ¦ãƒ¼ã‚¶ãƒ¼æ“ä½œãƒ•ãƒ­ãƒ¼: ã‚«ãƒ¼ãƒ‰è¿½åŠ ï¼ˆæ­£å¸¸ç³»ï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. ã‚«ãƒ¼ãƒ‰è¿½åŠ ã‚’é–‹å§‹                                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   IndexPage ã§ä»¥ä¸‹ã®ã„ãšã‚Œã‹ã‚’å®Ÿè¡Œ:                               â”‚
â”‚   - ãƒ˜ãƒƒãƒ€ãƒ¼ã® [ï¼‹è¿½åŠ ] ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯                          â”‚
â”‚   - ç©ºç™½éƒ¨åˆ†ã‚’å³ã‚¯ãƒªãƒƒã‚¯ â†’ ã€ŒAdd New Cardã€ã‚’é¸æŠ                 â”‚
â”‚   - ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ã§ Ctrl+N ã‚’æŠ¼ä¸‹                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 2. ãƒ•ã‚©ãƒ«ãƒ€é¸æŠãƒ€ã‚¤ã‚¢ãƒ­ã‚°                                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   OSæ¨™æº–ã®ãƒ•ã‚©ãƒ«ãƒ€é¸æŠãƒ€ã‚¤ã‚¢ãƒ­ã‚°ãŒè¡¨ç¤ºã•ã‚Œã‚‹                       â”‚
â”‚   â†’ ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒç”»åƒãƒ•ã‚©ãƒ«ãƒ€ã‚’é¸æŠã—ã¦ã€Œé¸æŠã€ã‚’ã‚¯ãƒªãƒƒã‚¯             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 3. ã‚«ãƒ¼ãƒ‰æƒ…å ±å…¥åŠ›ãƒ¢ãƒ¼ãƒ€ãƒ«                                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  æ–°è¦ã‚«ãƒ¼ãƒ‰ä½œæˆ                              [âœ•]          â”‚  â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚  â”‚                                                           â”‚  â”‚
â”‚  â”‚  ãƒ•ã‚©ãƒ«ãƒ€: /path/to/selected/folder                       â”‚  â”‚
â”‚  â”‚                                                           â”‚  â”‚
â”‚  â”‚  ã‚¿ã‚¤ãƒˆãƒ«: [folder_name        ]  â† ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¯ãƒ•ã‚©ãƒ«ãƒ€å  â”‚  â”‚
â”‚  â”‚                                                           â”‚  â”‚
â”‚  â”‚  ã‚µãƒ ãƒã‚¤ãƒ«:                                               â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                              â”‚  â”‚
â”‚  â”‚  â”‚ â–“â–“â–“â–“â–“â–“â–“ â”‚  â† ãƒ•ã‚©ãƒ«ãƒ€å†…æœ€åˆã®ç”»åƒãŒè‡ªå‹•é¸æŠ            â”‚  â”‚
â”‚  â”‚  â”‚ â–“â–“â–“â–“â–“â–“â–“ â”‚                                              â”‚  â”‚
â”‚  â”‚  â”‚ â–“â–“â–“â–“â–“â–“â–“ â”‚                                              â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  [å¤‰æ›´...]                                   â”‚  â”‚
â”‚  â”‚                                                           â”‚  â”‚
â”‚  â”‚                           [ã‚­ãƒ£ãƒ³ã‚»ãƒ«] [ä½œæˆ]             â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                 â”‚
â”‚  â€» [å¤‰æ›´...] â†’ OSæ¨™æº–ã®ãƒ•ã‚¡ã‚¤ãƒ«é¸æŠãƒ€ã‚¤ã‚¢ãƒ­ã‚°ã‚’è¡¨ç¤º             â”‚
â”‚     ï¼ˆãƒ•ã‚©ãƒ«ãƒ€å†…å¤–ã‚’å•ã‚ãšä»»æ„ã®ç”»åƒãƒ•ã‚¡ã‚¤ãƒ«ã‚’é¸æŠå¯èƒ½ï¼‰          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â”‚ [ä½œæˆ] ã‚¯ãƒªãƒƒã‚¯
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 4. ã‚«ãƒ¼ãƒ‰ä½œæˆå®Œäº†                                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   - æ–°ã—ã„ã‚«ãƒ¼ãƒ‰ãŒã‚°ãƒªãƒƒãƒ‰ã®æœ«å°¾ã«è¿½åŠ ã•ã‚Œã‚‹                      â”‚
â”‚   - ãƒ¢ãƒ¼ãƒ€ãƒ«ãŒé–‰ã˜ã€IndexPage ã«æˆ»ã‚‹                             â”‚
â”‚   - æ–°ã—ã„ã‚«ãƒ¼ãƒ‰ãŒé¸æŠçŠ¶æ…‹ï¼ˆãƒã‚¤ãƒ©ã‚¤ãƒˆï¼‰ã«ãªã‚‹                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 6.3 IndexPage ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“ sketch.ivprofile â–¼   [ï¼‹è¿½åŠ ]  [æ¤œç´¢: ____]  [âš™] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚  â”‚ â–“â–“â–“â–“â–“â–“â–“ â”‚  â”‚ â–“â–“â–“â–“â–“â–“â–“ â”‚  â”‚ âš  ERROR â”‚ â† ã‚¨ãƒ©ãƒ¼çŠ¶æ…‹ â”‚
â”‚  â”‚ â–“â–“â–“â–“â–“â–“â–“ â”‚  â”‚ â–“â–“â–“â–“â–“â–“â–“ â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€ â”‚   ï¼ˆèµ¤æ ç­‰ã§ â”‚
â”‚  â”‚ â–“â–“â–“â–“â–“â–“â–“ â”‚  â”‚ â–“â–“â–“â–“â–“â–“â–“ â”‚  â”‚  Path   â”‚    è¦–è¦šçš„ã«  â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚  not    â”‚    åŒºåˆ¥ï¼‰    â”‚
â”‚  â”‚ã‚¿ã‚¤ãƒˆãƒ«1 â”‚  â”‚ã‚¿ã‚¤ãƒˆãƒ«2 â”‚  â”‚  found  â”‚            â”‚
â”‚  â”‚ [âœ][ğŸ—‘] â”‚  â”‚ [âœ][ğŸ—‘] â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ã‚¿ã‚¤ãƒˆãƒ«3 â”‚            â”‚
â”‚                            â”‚ [âœ][ğŸ—‘] â”‚            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚  â”‚ â–“â–“â–“â–“â–“â–“â–“ â”‚  â”‚ â–“â–“â–“â–“â–“â–“â–“ â”‚                         â”‚
â”‚  â”‚ â–“â–“â–“â–“â–“â–“â–“ â”‚  â”‚ â–“â–“â–“â–“â–“â–“â–“ â”‚                         â”‚
â”‚  â”‚ â–“â–“â–“â–“â–“â–“â–“ â”‚  â”‚ â–“â–“â–“â–“â–“â–“â–“ â”‚                         â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                         â”‚
â”‚  â”‚ã‚¿ã‚¤ãƒˆãƒ«4 â”‚  â”‚ã‚¿ã‚¤ãƒˆãƒ«5 â”‚                         â”‚
â”‚  â”‚ [âœ][ğŸ—‘] â”‚  â”‚ [âœ][ğŸ—‘] â”‚                         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                         â”‚
â”‚                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â€» ã‚¨ãƒ©ãƒ¼çŠ¶æ…‹ã®ã‚«ãƒ¼ãƒ‰:
  - ã‚¯ãƒªãƒƒã‚¯ã—ã¦ã‚‚ãƒ“ãƒ¥ãƒ¼ã‚¢ã‚’é–‹ã‘ãªã„
  - ãƒ„ãƒ¼ãƒ«ãƒãƒƒãƒ—ã§ã‚¨ãƒ©ãƒ¼è©³ç´°ã‚’è¡¨ç¤º
  - ç·¨é›†ã§ãƒ‘ã‚¹å¤‰æ›´å¯èƒ½ã€å‰Šé™¤ã‚‚å¯èƒ½

â€» ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«åã‚¯ãƒªãƒƒã‚¯æ™‚ã®ãƒ¡ãƒ‹ãƒ¥ãƒ¼:
  - æœ€è¿‘ä½¿ç”¨ã—ãŸãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«ä¸€è¦§
  - ã€Œåˆ¥ã®ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é–‹ã...ã€â†’ ãƒ•ã‚¡ã‚¤ãƒ«ãƒ€ã‚¤ã‚¢ãƒ­ã‚°
  - ã€Œæ–°è¦ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«ä½œæˆã€â†’ ãƒ•ã‚¡ã‚¤ãƒ«ä¿å­˜ãƒ€ã‚¤ã‚¢ãƒ­ã‚°
  - ã€Œåˆ¥åã§ä¿å­˜...ã€â†’ ãƒ•ã‚¡ã‚¤ãƒ«ä¿å­˜ãƒ€ã‚¤ã‚¢ãƒ­ã‚°
```

### 6.4 ViewerPage ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [â† æˆ»ã‚‹]  ã‚¿ã‚¤ãƒˆãƒ« - image_003.jpg   [H][R]  [â›¶] â”‚  â† ã‚¿ã‚¤ãƒˆãƒ«ãƒãƒ¼
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤     [H]: H-Flipæœ‰åŠ¹æ™‚ã«è¡¨ç¤º
â”‚                                                     â”‚     [R]: Shuffleæœ‰åŠ¹æ™‚ã«è¡¨ç¤º
â”‚                                                     â”‚
â”‚                                                     â”‚
â”‚                                                     â”‚
â”‚              ç”»åƒè¡¨ç¤ºã‚¨ãƒªã‚¢                          â”‚
â”‚           ï¼ˆH-Flipæ™‚ã¯åè»¢è¡¨ç¤ºï¼‰                     â”‚
â”‚          ï¼ˆã‚¯ãƒªãƒƒã‚¯ã§æ¬¡ã®ç”»åƒã¸ï¼‰                    â”‚
â”‚                                                     â”‚
â”‚                                                     â”‚
â”‚                                                     â”‚
â”‚                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â€» ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ã¯ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ï¼ˆâ†/â†’ï¼‰ã¾ãŸã¯ã‚¯ãƒªãƒƒã‚¯ã§æ“ä½œ
```

### 6.5 ã‚µãƒ ãƒã‚¤ãƒ«ç”»åƒã®é¸æŠã¨ä¿å­˜

ã‚µãƒ ãƒã‚¤ãƒ«ç”»åƒã®å¤‰æ›´ã¯OSæ¨™æº–ã®ãƒ•ã‚¡ã‚¤ãƒ«é¸æŠãƒ€ã‚¤ã‚¢ãƒ­ã‚°ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚

**æ“ä½œæ–¹æ³•**
- ã‚«ãƒ¼ãƒ‰è¿½åŠ ãƒ¢ãƒ¼ãƒ€ãƒ« â†’ [å¤‰æ›´...] ãƒœã‚¿ãƒ³
- IndexPage â†’ ã‚«ãƒ¼ãƒ‰å³ã‚¯ãƒªãƒƒã‚¯ â†’ ã€ŒChange Thumbnailã€

**ã‚µãƒ ãƒã‚¤ãƒ«ç”»åƒã®ä¿å­˜ã«ã¤ã„ã¦**

| é¸æŠå…ƒ | ä¿å­˜æ–¹æ³• |
|-------|---------|
| ãƒ•ã‚©ãƒ«ãƒ€å†…ç”»åƒ | ç›¸å¯¾ãƒ‘ã‚¹ã§å‚ç…§ï¼ˆã‚³ãƒ”ãƒ¼ã—ãªã„ï¼‰ |
| ãƒ•ã‚©ãƒ«ãƒ€å¤–ç”»åƒ | ã‚µãƒ ãƒã‚¤ãƒ«ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ã‚³ãƒ”ãƒ¼ã—ã¦ä¿å­˜ |

---

## 7. APIè¨­è¨ˆï¼ˆTauri Commandsï¼‰

### 7.1 ã‚«ãƒ¼ãƒ‰ç®¡ç†

```rust
// ã‚«ãƒ¼ãƒ‰ä¸€è¦§å–å¾—
#[tauri::command]
async fn get_cards() -> Result<Vec<Card>, String>;

// ã‚«ãƒ¼ãƒ‰è¿½åŠ ï¼ˆãƒ•ã‚©ãƒ«ãƒ€é¸æŠãƒ€ã‚¤ã‚¢ãƒ­ã‚°ã‚’é–‹ãï¼‰
#[tauri::command]
async fn add_card(title: String) -> Result<Card, String>;

// ã‚«ãƒ¼ãƒ‰æ›´æ–°
#[tauri::command]
async fn update_card(card: Card) -> Result<Card, String>;

// ã‚«ãƒ¼ãƒ‰å‰Šé™¤
#[tauri::command]
async fn delete_card(id: String) -> Result<(), String>;

// ã‚«ãƒ¼ãƒ‰é †åºæ›´æ–°
#[tauri::command]
async fn reorder_cards(card_ids: Vec<String>) -> Result<(), String>;

// ã‚µãƒ ãƒã‚¤ãƒ«è¨­å®š
#[tauri::command]
async fn set_card_thumbnail(card_id: String, image_path: String) -> Result<Card, String>;
```

### 7.2 ç”»åƒæ“ä½œ

```rust
// ãƒ•ã‚©ãƒ«ãƒ€å†…ã®ç”»åƒä¸€è¦§å–å¾—
#[tauri::command]
async fn get_images(folder_path: String) -> Result<Vec<ImageInfo>, String>;

// ã‚µãƒ ãƒã‚¤ãƒ«å–å¾—ï¼ˆã‚­ãƒ£ãƒƒã‚·ãƒ¥ä»˜ãï¼‰
#[tauri::command]
async fn get_thumbnail(image_path: String, size: u32) -> Result<String, String>;
// æˆ»ã‚Šå€¤: Base64 data URL

// ç”»åƒã®è©³ç´°æƒ…å ±å–å¾—
#[tauri::command]
async fn get_image_detail(path: String) -> Result<ImageInfo, String>;

// ç”»åƒã‚’ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ”ãƒ¼
#[tauri::command]
async fn copy_image_to_clipboard(path: String) -> Result<(), String>;

// ãƒ†ã‚­ã‚¹ãƒˆã‚’ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ”ãƒ¼ï¼ˆãƒ‘ã‚¹ã‚³ãƒ”ãƒ¼ç”¨ï¼‰
#[tauri::command]
async fn copy_text_to_clipboard(text: String) -> Result<(), String>;
```

### 7.3 ãƒ€ã‚¤ã‚¢ãƒ­ã‚°

```rust
// ãƒ•ã‚©ãƒ«ãƒ€é¸æŠãƒ€ã‚¤ã‚¢ãƒ­ã‚°
#[tauri::command]
async fn select_folder() -> Result<Option<String>, String>;

// ç”»åƒãƒ•ã‚¡ã‚¤ãƒ«é¸æŠãƒ€ã‚¤ã‚¢ãƒ­ã‚°ï¼ˆã‚µãƒ ãƒã‚¤ãƒ«é¸æŠç”¨ï¼‰
// åˆæœŸãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’æŒ‡å®šå¯èƒ½ï¼ˆã‚«ãƒ¼ãƒ‰ã®ãƒ•ã‚©ãƒ«ãƒ€ã‚’é–‹ããŸã‚ï¼‰
#[tauri::command]
async fn select_image_file(initial_dir: Option<String>) -> Result<Option<String>, String>;
```

### 7.4 è¨­å®š

```rust
// è¨­å®šå–å¾—
#[tauri::command]
async fn get_setting(key: String) -> Result<Option<String>, String>;

// è¨­å®šä¿å­˜
#[tauri::command]
async fn set_setting(key: String, value: String) -> Result<(), String>;
```

### 7.5 ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«ç®¡ç†

```rust
// ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«èª­ã¿è¾¼ã¿
#[tauri::command]
async fn load_profile(path: String) -> Result<ProfileData, String>;

// ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«ä¿å­˜ï¼ˆç¾åœ¨ã®ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä¸Šæ›¸ãä¿å­˜ï¼‰
#[tauri::command]
async fn save_profile() -> Result<(), String>;

// ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«åˆ¥åä¿å­˜
#[tauri::command]
async fn save_profile_as(path: String) -> Result<(), String>;

// æ–°è¦ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«ä½œæˆ
#[tauri::command]
async fn create_new_profile(path: String) -> Result<ProfileData, String>;

// ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«é¸æŠãƒ€ã‚¤ã‚¢ãƒ­ã‚°ï¼ˆ.ivprofileãƒ•ã‚¡ã‚¤ãƒ«ï¼‰
#[tauri::command]
async fn select_profile_file() -> Result<Option<String>, String>;

// ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«ä¿å­˜ãƒ€ã‚¤ã‚¢ãƒ­ã‚°ï¼ˆ.ivprofileãƒ•ã‚¡ã‚¤ãƒ«ï¼‰
#[tauri::command]
async fn select_profile_save_path() -> Result<Option<String>, String>;

// ã‚«ãƒ¼ãƒ‰ã®ãƒ•ã‚©ãƒ«ãƒ€ãƒ‘ã‚¹æ¤œè¨¼ï¼ˆãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«èª­ã¿è¾¼ã¿æ™‚ã«å®Ÿè¡Œï¼‰
#[tauri::command]
async fn validate_card_paths() -> Result<Vec<CardWithStatus>, String>;

// ã‚«ãƒ¼ãƒ‰ã®ãƒ•ã‚©ãƒ«ãƒ€ãƒ‘ã‚¹æ›´æ–°ï¼ˆã‚¨ãƒ©ãƒ¼çŠ¶æ…‹ã®ã‚«ãƒ¼ãƒ‰ä¿®æ­£ç”¨ï¼‰
#[tauri::command]
async fn update_card_path(card_id: String, new_path: String) -> Result<Card, String>;
```

### 7.6 ã‚¢ãƒ—ãƒªå…±é€šè¨­å®š

```rust
// ã‚¢ãƒ—ãƒªå…±é€šè¨­å®šå–å¾—ï¼ˆèµ·å‹•æ™‚ã«å‘¼ã³å‡ºã—ï¼‰
#[tauri::command]
async fn get_app_config() -> Result<AppConfig, String>;

// ã‚¢ãƒ—ãƒªå…±é€šè¨­å®šä¿å­˜
#[tauri::command]
async fn save_app_config(config: AppConfig) -> Result<(), String>;

// æœ€è¿‘ä½¿ç”¨ã—ãŸãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«å±¥æ­´ã«è¿½åŠ 
#[tauri::command]
async fn add_recent_profile(path: String) -> Result<(), String>;

// æœ€è¿‘ä½¿ç”¨ã—ãŸãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«å±¥æ­´ã‹ã‚‰å‰Šé™¤ï¼ˆãƒ•ã‚¡ã‚¤ãƒ«ãŒå­˜åœ¨ã—ãªã„å ´åˆç­‰ï¼‰
#[tauri::command]
async fn remove_recent_profile(path: String) -> Result<(), String>;
```

---

## 8. ãƒ•ã‚¡ã‚¤ãƒ«æ§‹æˆ

```
image-folder-viewer/               # ãƒªãƒã‚¸ãƒˆãƒªãƒ«ãƒ¼ãƒˆ
â”œâ”€â”€ docs/
â”‚   â””â”€â”€ design.md                  # è¨­è¨ˆæ›¸
â”œâ”€â”€ image-folder-viewer/           # Tauriã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³
â”‚   â”œâ”€â”€ src-tauri/
â”‚   â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”‚   â”œâ”€â”€ main.rs            # ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆ
â”‚   â”‚   â”‚   â”œâ”€â”€ lib.rs             # ãƒ©ã‚¤ãƒ–ãƒ©ãƒªãƒ«ãƒ¼ãƒˆ
â”‚   â”‚   â”‚   â”œâ”€â”€ commands/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ mod.rs
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ cards.rs       # ã‚«ãƒ¼ãƒ‰ç®¡ç†ã‚³ãƒãƒ³ãƒ‰
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ images.rs      # ç”»åƒæ“ä½œã‚³ãƒãƒ³ãƒ‰
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ clipboard.rs   # ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰æ“ä½œ
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ profile.rs     # ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«ç®¡ç†ã‚³ãƒãƒ³ãƒ‰
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ app_config.rs  # ã‚¢ãƒ—ãƒªå…±é€šè¨­å®šã‚³ãƒãƒ³ãƒ‰
â”‚   â”‚   â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ mod.rs
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ thumbnail.rs   # ã‚µãƒ ãƒã‚¤ãƒ«ç”Ÿæˆ
â”‚   â”‚   â”‚   â””â”€â”€ models/
â”‚   â”‚   â”‚       â”œâ”€â”€ mod.rs
â”‚   â”‚   â”‚       â”œâ”€â”€ card.rs
â”‚   â”‚   â”‚       â””â”€â”€ image.rs
â”‚   â”‚   â”œâ”€â”€ Cargo.toml
â”‚   â”‚   â”œâ”€â”€ tauri.conf.json
â”‚   â”‚   â””â”€â”€ icons/
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ main.tsx               # Reactã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆ
â”‚   â”‚   â”œâ”€â”€ App.tsx                # ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°è¨­å®š
â”‚   â”‚   â”œâ”€â”€ index.css              # Tailwindè¨­å®š
â”‚   â”‚   â”œâ”€â”€ pages/
â”‚   â”‚   â”‚   â”œâ”€â”€ IndexPage.tsx      # ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ãƒšãƒ¼ã‚¸
â”‚   â”‚   â”‚   â””â”€â”€ ViewerPage.tsx     # ç”»åƒãƒ“ãƒ¥ãƒ¼ã‚¢
â”‚   â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”‚   â”œâ”€â”€ cards/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ CardGrid.tsx   # ã‚«ãƒ¼ãƒ‰ã‚°ãƒªãƒƒãƒ‰
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ CardItem.tsx   # å€‹åˆ¥ã‚«ãƒ¼ãƒ‰
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ CardForm.tsx   # è¿½åŠ /ç·¨é›†ãƒ•ã‚©ãƒ¼ãƒ 
â”‚   â”‚   â”‚   â”œâ”€â”€ viewer/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ImageDisplay.tsx # ç”»åƒè¡¨ç¤ºï¼ˆH-Flipå¯¾å¿œï¼‰
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ ImageInfo.tsx  # ç”»åƒæƒ…å ±ãƒ‘ãƒãƒ«
â”‚   â”‚   â”‚   â”œâ”€â”€ common/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Modal.tsx
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ ContextMenu.tsx # ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆãƒ¡ãƒ‹ãƒ¥ãƒ¼
â”‚   â”‚   â”‚   â””â”€â”€ layout/
â”‚   â”‚   â”‚       â””â”€â”€ Header.tsx
â”‚   â”‚   â”œâ”€â”€ hooks/
â”‚   â”‚   â”‚   â”œâ”€â”€ useCards.ts        # ã‚«ãƒ¼ãƒ‰æ“ä½œãƒ•ãƒƒã‚¯
â”‚   â”‚   â”‚   â”œâ”€â”€ useImages.ts       # ç”»åƒæ“ä½œãƒ•ãƒƒã‚¯
â”‚   â”‚   â”‚   â”œâ”€â”€ useKeyboard.ts     # ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆ
â”‚   â”‚   â”‚   â””â”€â”€ useContextMenu.ts  # ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆãƒ¡ãƒ‹ãƒ¥ãƒ¼åˆ¶å¾¡
â”‚   â”‚   â”œâ”€â”€ store/
â”‚   â”‚   â”‚   â”œâ”€â”€ cardStore.ts       # ã‚«ãƒ¼ãƒ‰çŠ¶æ…‹ç®¡ç†
â”‚   â”‚   â”‚   â”œâ”€â”€ viewerStore.ts     # ãƒ“ãƒ¥ãƒ¼ã‚¢çŠ¶æ…‹ç®¡ç†
â”‚   â”‚   â”‚   â””â”€â”€ appStore.ts        # ã‚¢ãƒ—ãƒªçŠ¶æ…‹ç®¡ç†ï¼ˆæ°¸ç¶šåŒ–ï¼‰
â”‚   â”‚   â”œâ”€â”€ api/
â”‚   â”‚   â”‚   â””â”€â”€ tauri.ts           # Tauriã‚³ãƒãƒ³ãƒ‰å‘¼ã³å‡ºã—
â”‚   â”‚   â””â”€â”€ types/
â”‚   â”‚       â””â”€â”€ index.ts           # å‹å®šç¾©
â”‚   â”œâ”€â”€ index.html
â”‚   â”œâ”€â”€ package.json
â”‚   â”œâ”€â”€ vite.config.ts
â”‚   â””â”€â”€ tsconfig.json
â”œâ”€â”€ CLAUDE.md
â”œâ”€â”€ README.md
â””â”€â”€ LICENSE
```

---

## 9. é–‹ç™ºãƒ•ã‚§ãƒ¼ã‚º

### Phase 1: åŸºç›¤æ§‹ç¯‰ âœ… å®Œäº†
- [x] Tauriãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆåˆæœŸåŒ–
- [x] ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ç’°å¢ƒæ§‹ç¯‰ï¼ˆReact + TypeScript + Tailwindï¼‰
- [x] ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«ãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆ.ivprofileï¼‰ã®èª­ã¿æ›¸ã
- [x] ã‚¢ãƒ—ãƒªå…±é€šè¨­å®šï¼ˆapp_config.jsonï¼‰ã®èª­ã¿æ›¸ã
- [x] åŸºæœ¬çš„ãªãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### Phase 2: ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«ç®¡ç† âœ… å®Œäº†
- [x] èµ·å‹•æ™‚ã®ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«é¸æŠãƒ•ãƒ­ãƒ¼
- [x] æœ€è¿‘ä½¿ç”¨ã—ãŸãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«å±¥æ­´
- [x] æ–°è¦ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«ä½œæˆ
- [x] ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«åˆ‡ã‚Šæ›¿ãˆï¼ˆIndexPageãƒ˜ãƒƒãƒ€ãƒ¼ï¼‰
- [x] åˆ¥åä¿å­˜

### Phase 3: ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ãƒšãƒ¼ã‚¸ âœ… å®Œäº†
- [x] ã‚«ãƒ¼ãƒ‰ã®è¿½åŠ ãƒ»å‰Šé™¤ãƒ»ç·¨é›†
- [x] ã‚µãƒ ãƒã‚¤ãƒ«ã‚°ãƒªãƒƒãƒ‰è¡¨ç¤º
- [x] ãƒ‰ãƒ©ãƒƒã‚°&ãƒ‰ãƒ­ãƒƒãƒ—ä¸¦ã¹æ›¿ãˆ
- [x] ã‚µãƒ ãƒã‚¤ãƒ«ç”»åƒé¸æŠï¼ˆOSãƒ•ã‚¡ã‚¤ãƒ«ãƒ€ã‚¤ã‚¢ãƒ­ã‚°ä½¿ç”¨ï¼‰
- [x] ã‚¨ãƒ©ãƒ¼çŠ¶æ…‹ã‚«ãƒ¼ãƒ‰ã®è¡¨ç¤ºãƒ»ç·¨é›†
- [x] ã‚µãƒ ãƒã‚¤ãƒ«ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–ï¼ˆJPEGå‡ºåŠ›ã€ãƒ¡ãƒ¢ãƒªã‚­ãƒ£ãƒƒã‚·ãƒ¥ï¼‰

#### Phase 3 å®Ÿè£…ã‚¹ãƒ†ãƒƒãƒ—

**Step 1: Rustãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ - ãƒ€ã‚¤ã‚¢ãƒ­ã‚°ãƒ»ç”»åƒã‚³ãƒãƒ³ãƒ‰è¿½åŠ  âœ… å®Œäº†**
| ãƒ•ã‚¡ã‚¤ãƒ« | å¤‰æ›´å†…å®¹ |
|---------|---------|
| `src-tauri/Cargo.toml` | `image`, `base64` ã‚¯ãƒ¬ãƒ¼ãƒˆè¿½åŠ  |
| `src-tauri/src/commands/dialog.rs` | `select_folder`, `select_image_file` è¿½åŠ  |
| `src-tauri/src/commands/images.rs` | æ–°è¦: `get_thumbnail`, `get_first_image_in_folder`, `validate_folder_path` |
| `src-tauri/src/commands/mod.rs` | images ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«è¿½åŠ  |
| `src-tauri/src/lib.rs` | æ–°è¦ã‚³ãƒãƒ³ãƒ‰ç™»éŒ² |

**Step 2: ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰APIå±¤ã®æ‹¡å¼µ âœ… å®Œäº†**
| ãƒ•ã‚¡ã‚¤ãƒ« | å¤‰æ›´å†…å®¹ |
|---------|---------|
| `src/api/tauri.ts` | `selectFolder`, `selectImageFile`, `getThumbnail`, `getFirstImageInFolder`, `validateFolderPath` è¿½åŠ  |

**Step 3: Zustandã‚¹ãƒˆã‚¢ - ã‚«ãƒ¼ãƒ‰æ“ä½œãƒ¡ã‚½ãƒƒãƒ‰è¿½åŠ  âœ… å®Œäº†**
| ãƒ•ã‚¡ã‚¤ãƒ« | å¤‰æ›´å†…å®¹ |
|---------|---------|
| `src/store/profileStore.ts` | `addCard`, `updateCard`, `deleteCard`, `reorderCards` ãƒ¡ã‚½ãƒƒãƒ‰è¿½åŠ ã€`useCards()` ã‚«ã‚¹ã‚¿ãƒ ãƒ•ãƒƒã‚¯è¿½åŠ  |

**Step 4: å…±é€šã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ - ãƒ¢ãƒ¼ãƒ€ãƒ« âœ… å®Œäº†**
| ãƒ•ã‚¡ã‚¤ãƒ« | å¤‰æ›´å†…å®¹ |
|---------|---------|
| `src/components/common/Modal.tsx` | æ–°è¦: æ±ç”¨ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã€Buttonã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ |

**Step 5: ã‚«ãƒ¼ãƒ‰ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆç¾¤ âœ… å®Œäº†**
| ãƒ•ã‚¡ã‚¤ãƒ« | å¤‰æ›´å†…å®¹ |
|---------|---------|
| `src/components/cards/CardItem.tsx` | æ–°è¦: ã‚«ãƒ¼ãƒ‰è¡¨ç¤ºï¼ˆã‚µãƒ ãƒã‚¤ãƒ«ã€ã‚¿ã‚¤ãƒˆãƒ«ã€ã‚¨ãƒ©ãƒ¼çŠ¶æ…‹ï¼‰ |
| `src/components/cards/CardAddModal.tsx` | æ–°è¦: ã‚«ãƒ¼ãƒ‰è¿½åŠ ãƒ¢ãƒ¼ãƒ€ãƒ« |
| `src/components/cards/CardEditModal.tsx` | æ–°è¦: ã‚«ãƒ¼ãƒ‰ç·¨é›†ãƒ¢ãƒ¼ãƒ€ãƒ« |
| `src/components/cards/CardGrid.tsx` | æ–°è¦: ã‚°ãƒªãƒƒãƒ‰ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ |

**Step 6: @dnd-kit ã«ã‚ˆã‚‹ãƒ‰ãƒ©ãƒƒã‚°&ãƒ‰ãƒ­ãƒƒãƒ—å®Ÿè£… âœ… å®Œäº†**
| ãƒ•ã‚¡ã‚¤ãƒ« | å¤‰æ›´å†…å®¹ |
|---------|---------|
| `package.json` | `@dnd-kit/core`, `@dnd-kit/sortable` è¿½åŠ  |
| `src/components/cards/CardGrid.tsx` | DndContext, SortableContext çµ±åˆ |
| `src/components/cards/SortableCardItem.tsx` | æ–°è¦: ãƒ‰ãƒ©ãƒƒã‚°å¯èƒ½ã‚«ãƒ¼ãƒ‰ï¼ˆuseSortable ãƒ•ãƒƒã‚¯ä½¿ç”¨ï¼‰ |

**Step 7: IndexPage ã®çµ±åˆ âœ… å®Œäº†**
| ãƒ•ã‚¡ã‚¤ãƒ« | å¤‰æ›´å†…å®¹ |
|---------|---------|
| `src/pages/IndexPage.tsx` | å…¨ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆçµ±åˆã€ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆè¿½åŠ ï¼ˆCtrl+N, Delete, çŸ¢å°ã‚­ãƒ¼, Enterï¼‰ |

**Step 8: ã‚¨ãƒ©ãƒ¼çŠ¶æ…‹ã‚«ãƒ¼ãƒ‰ã®è¡¨ç¤ºãƒ»ç·¨é›† âœ… å®Œäº†**
| ãƒ•ã‚¡ã‚¤ãƒ« | å¤‰æ›´å†…å®¹ |
|---------|---------|
| `src/components/cards/CardItem.tsx` | ã‚¨ãƒ©ãƒ¼çŠ¶æ…‹ã‚¹ã‚¿ã‚¤ãƒ«ï¼ˆèµ¤æ ã€ã‚¢ã‚¤ã‚³ãƒ³ï¼‰ |
| `src/components/cards/CardEditModal.tsx` | ãƒ•ã‚©ãƒ«ãƒ€ãƒ‘ã‚¹å¤‰æ›´æ©Ÿèƒ½ |

#### Phase 3 æ–°è¦ãƒ•ã‚¡ã‚¤ãƒ«ä¸€è¦§

```
src/components/
â”œâ”€â”€ common/
â”‚   â””â”€â”€ Modal.tsx
â””â”€â”€ cards/
    â”œâ”€â”€ CardGrid.tsx
    â”œâ”€â”€ CardItem.tsx
    â”œâ”€â”€ SortableCardItem.tsx
    â”œâ”€â”€ CardAddModal.tsx
    â””â”€â”€ CardEditModal.tsx

src-tauri/src/commands/
â””â”€â”€ images.rs
```

#### Phase 3 å®Ÿè£…æ™‚ã®æ³¨æ„äº‹é …

1. **Zustand useShallow**: é…åˆ—ã‚’è¿”ã™ã‚»ãƒ¬ã‚¯ã‚¿ãƒ¼ã¯å¿…ãš `useShallow` ã§ãƒ©ãƒƒãƒ—
2. **ã‚µãƒ ãƒã‚¤ãƒ«**: image ã‚¯ãƒ¬ãƒ¼ãƒˆã§ãƒªã‚µã‚¤ã‚º â†’ Base64 DataURL ã§è¿”å´
3. **@dnd-kit**: `rectSortingStrategy` ã§ã‚°ãƒªãƒƒãƒ‰å¯¾å¿œã€`arrayMove` ã§ä¸¦ã¹æ›¿ãˆ
4. **ã‚¨ãƒ©ãƒ¼çŠ¶æ…‹**: `isValid === false` ã®ã‚«ãƒ¼ãƒ‰ã¯èµ¤æ è¡¨ç¤ºã€ã‚¯ãƒªãƒƒã‚¯ç„¡åŠ¹

### Phase 4: ç”»åƒãƒ“ãƒ¥ãƒ¼ã‚¢ âœ… å®Œäº†
- [x] ç”»åƒè¡¨ç¤ºï¼ˆH-Flipå¯¾å¿œï¼‰
- [x] ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆå‰å¾Œç§»å‹•ã€ã‚·ãƒ£ãƒƒãƒ•ãƒ«ï¼‰
- [x] ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆ
- [x] ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆãƒ¡ãƒ‹ãƒ¥ãƒ¼
- [x] çµ‚äº†æ™‚ã®çŠ¶æ…‹ä¿å­˜ï¼ˆãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«ã«ä¿å­˜ï¼‰

#### Phase 4 å®Ÿè£…ã‚¹ãƒ†ãƒƒãƒ—

**Step 1: Rustãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ - ç”»åƒä¸€è¦§ãƒ»ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã‚³ãƒãƒ³ãƒ‰è¿½åŠ  âœ… å®Œäº†**
| ãƒ•ã‚¡ã‚¤ãƒ« | å¤‰æ›´å†…å®¹ |
|---------|---------|
| `src-tauri/Cargo.toml` | `arboard` ã‚¯ãƒ¬ãƒ¼ãƒˆè¿½åŠ ï¼ˆã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ç”¨ï¼‰ |
| `src-tauri/src/commands/images.rs` | `get_images_in_folder` è¿½åŠ ï¼ˆç”»åƒä¸€è¦§å–å¾—ã€è»½é‡ç‰ˆï¼špath/filenameã®ã¿ï¼‰ |
| `src-tauri/src/commands/clipboard.rs` | æ–°è¦: `copy_image_to_clipboard`, `copy_text_to_clipboard` |
| `src-tauri/src/commands/mod.rs` | clipboard ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«è¿½åŠ  |
| `src-tauri/src/lib.rs` | æ–°è¦ã‚³ãƒãƒ³ãƒ‰ç™»éŒ² |

**Step 2: ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰APIå±¤ãƒ»å‹å®šç¾©ã®æ‹¡å¼µ âœ… å®Œäº†**
| ãƒ•ã‚¡ã‚¤ãƒ« | å¤‰æ›´å†…å®¹ |
|---------|---------|
| `src/types/index.ts` | `ImageFile` å‹è¿½åŠ ï¼ˆè»½é‡ç‰ˆï¼‰ã€`ViewerState.images` ã‚’ `ImageFile[]` ã«å¤‰æ›´ |
| `src/api/tauri.ts` | `getImagesInFolder`, `copyImageToClipboard`, `copyTextToClipboard` è¿½åŠ  |

**Step 3: Zustandã‚¹ãƒˆã‚¢ - ãƒ“ãƒ¥ãƒ¼ã‚¢çŠ¶æ…‹ç®¡ç† âœ… å®Œäº†**
| ãƒ•ã‚¡ã‚¤ãƒ« | å¤‰æ›´å†…å®¹ |
|---------|---------|
| `src/store/viewerStore.ts` | æ–°è¦: ãƒ“ãƒ¥ãƒ¼ã‚¢çŠ¶æ…‹ç®¡ç†ï¼ˆcurrentIndex, images, hFlip, shuffleç­‰ï¼‰ |

ãƒ“ãƒ¥ãƒ¼ã‚¢ã‚¹ãƒˆã‚¢ã®çŠ¶æ…‹:
```typescript
interface ViewerState {
  cardId: string | null;           // è¡¨ç¤ºä¸­ã®ã‚«ãƒ¼ãƒ‰ID
  cardTitle: string;               // ã‚«ãƒ¼ãƒ‰ã‚¿ã‚¤ãƒˆãƒ«
  folderPath: string | null;       // ãƒ•ã‚©ãƒ«ãƒ€ãƒ‘ã‚¹
  images: ImageFile[];             // ãƒ•ã‚©ãƒ«ãƒ€å†…ã®ç”»åƒä¸€è¦§ï¼ˆè»½é‡ç‰ˆï¼‰
  currentIndex: number;            // ç¾åœ¨ã®ç”»åƒã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹
  shuffledIndices: number[] | null; // ã‚·ãƒ£ãƒƒãƒ•ãƒ«æ™‚ã®ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹é…åˆ—
  hFlipEnabled: boolean;           // H-Flipæœ‰åŠ¹
  shuffleEnabled: boolean;         // ã‚·ãƒ£ãƒƒãƒ•ãƒ«æœ‰åŠ¹
  isLoading: boolean;              // èª­ã¿è¾¼ã¿ä¸­
  error: string | null;            // ã‚¨ãƒ©ãƒ¼
}
```

ã‚«ã‚¹ã‚¿ãƒ ãƒ•ãƒƒã‚¯:
- `useCurrentImage()` - ç¾åœ¨ã®ç”»åƒæƒ…å ±
- `useImages()` - ç”»åƒä¸€è¦§
- `useNavigationState()` - ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³çŠ¶æ…‹
- `useViewerOptions()` - è¡¨ç¤ºã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼ˆhFlip, shuffleï¼‰
- `useViewerActions()` - ãƒ“ãƒ¥ãƒ¼ã‚¢ã‚¢ã‚¯ã‚·ãƒ§ãƒ³

**Step 4: ViewerPageåŸºæœ¬å®Ÿè£… - ç”»åƒè¡¨ç¤ºãƒ»ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ âœ… å®Œäº†**
| ãƒ•ã‚¡ã‚¤ãƒ« | å¤‰æ›´å†…å®¹ |
|---------|---------|
| `src-tauri/tauri.conf.json` | `assetProtocol` æœ‰åŠ¹åŒ–ï¼ˆãƒ­ãƒ¼ã‚«ãƒ«ç”»åƒã®WebViewè¡¨ç¤ºç”¨ï¼‰ |
| `src/pages/ViewerPage.tsx` | ã‚¹ã‚±ãƒ«ãƒˆãƒ³ã‹ã‚‰æœ¬å®Ÿè£…ã«æ›´æ–°ï¼ˆç”»åƒè¡¨ç¤ºã€ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ã€ãƒ˜ãƒƒãƒ€ãƒ¼/ãƒ•ãƒƒã‚¿ãƒ¼ï¼‰ |
| `src/components/viewer/ImageDisplay.tsx` | æ–°è¦: ç”»åƒè¡¨ç¤ºã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆï¼ˆ`convertFileSrc`ã§ãƒ­ãƒ¼ã‚«ãƒ«ãƒ•ã‚¡ã‚¤ãƒ«è¡¨ç¤ºã€H-Flipå¯¾å¿œï¼‰ |

æ©Ÿèƒ½:
- ã‚«ãƒ¼ãƒ‰IDã‹ã‚‰ãƒ•ã‚©ãƒ«ãƒ€ãƒ‘ã‚¹ã‚’å–å¾—ã—ã€ç”»åƒä¸€è¦§ã‚’èª­ã¿è¾¼ã¿
- `convertFileSrc`ï¼ˆTauri asset protocolï¼‰ã§ãƒ­ãƒ¼ã‚«ãƒ«ç”»åƒã‚’WebViewã«è¡¨ç¤º
- ç”»åƒã®ãƒ•ã‚£ãƒƒãƒˆè¡¨ç¤ºï¼ˆ`object-contain`ã§ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã‚µã‚¤ã‚ºã«åˆã‚ã›ã‚‹ï¼‰
- ã‚¯ãƒªãƒƒã‚¯ã§æ¬¡ã®ç”»åƒã¸ã€â†â†’ã‚­ãƒ¼ã§å‰å¾ŒãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³
- æˆ»ã‚‹ãƒœã‚¿ãƒ³ / ESC / Q ã§IndexPageã¸ï¼ˆãƒ“ãƒ¥ãƒ¼ã‚¢ã‚¹ãƒˆã‚¢ã‚’ãƒªã‚»ãƒƒãƒˆï¼‰
- ãƒ˜ãƒƒãƒ€ãƒ¼: ã‚«ãƒ¼ãƒ‰ã‚¿ã‚¤ãƒˆãƒ« + ãƒ•ã‚¡ã‚¤ãƒ«åã€H-Flip/Shuffleã‚¤ãƒ³ã‚¸ã‚±ãƒ¼ã‚¿ãƒ¼
- ãƒ•ãƒƒã‚¿ãƒ¼: ç¾åœ¨ä½ç½®/ç·æšæ•°è¡¨ç¤º
- ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°: ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«æœªèª­ã¿è¾¼ã¿ãƒ»ã‚«ãƒ¼ãƒ‰ä¸å­˜åœ¨æ™‚ã®ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆã€ç”»åƒèª­ã¿è¾¼ã¿ã‚¨ãƒ©ãƒ¼è¡¨ç¤º

**Step 5: H-Flipãƒ»ã‚·ãƒ£ãƒƒãƒ•ãƒ«æ©Ÿèƒ½ âœ… å®Œäº†**
| ãƒ•ã‚¡ã‚¤ãƒ« | å¤‰æ›´å†…å®¹ |
|---------|---------|
| `src/pages/ViewerPage.tsx` | ãƒ˜ãƒƒãƒ€ãƒ¼ã«H-Flip/Shuffleã®ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ãªãƒˆã‚°ãƒ«ãƒœã‚¿ãƒ³è¿½åŠ ï¼ˆæœ‰åŠ¹æ™‚: é’èƒŒæ™¯ã€ç„¡åŠ¹æ™‚: ã‚°ãƒ¬ãƒ¼ï¼‰ |

â€» ImageDisplay.tsxã®H-Flipï¼ˆCSS `scaleX(-1)`ï¼‰ã€viewerStore.tsã®ã‚·ãƒ£ãƒƒãƒ•ãƒ«ãƒ­ã‚¸ãƒƒã‚¯ï¼ˆFisher-Yatesã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ï¼‰ã¯Step 3-4ã§å®Ÿè£…æ¸ˆã¿

**Step 6: ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆ âœ… å®Œäº†**
| ãƒ•ã‚¡ã‚¤ãƒ« | å¤‰æ›´å†…å®¹ |
|---------|---------|
| `src/pages/ViewerPage.tsx` | useEffectã§ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ã‚¤ãƒ™ãƒ³ãƒˆå‡¦ç†ï¼ˆH, Rã‚­ãƒ¼è¿½åŠ ã€Spaceã‚­ãƒ¼è¿½åŠ ï¼‰ |

| ã‚­ãƒ¼ | æ©Ÿèƒ½ |
|------|------|
| `â†` / `â†’` | å‰å¾Œã®ç”»åƒ |
| `H` | H-Flipãƒˆã‚°ãƒ« |
| `R` | ã‚·ãƒ£ãƒƒãƒ•ãƒ«ãƒˆã‚°ãƒ« |
| `+` / `=` | ã‚ºãƒ¼ãƒ ã‚¤ãƒ³ï¼ˆÃ—1.2ï¼‰ |
| `-` | ã‚ºãƒ¼ãƒ ã‚¢ã‚¦ãƒˆï¼ˆÃ—0.8ï¼‰ |
| `0` | ã‚ºãƒ¼ãƒ ãƒªã‚»ãƒƒãƒˆ |
| `Space` | ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆãƒ¡ãƒ‹ãƒ¥ãƒ¼è¡¨ç¤ºï¼ˆç”»é¢ä¸­å¤®ï¼‰ |
| `Q` / `Escape` | IndexPageã«æˆ»ã‚‹ |

**Step 7: ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆãƒ¡ãƒ‹ãƒ¥ãƒ¼ âœ… å®Œäº†**
| ãƒ•ã‚¡ã‚¤ãƒ« | å¤‰æ›´å†…å®¹ |
|---------|---------|
| `src/components/common/ContextMenu.tsx` | æ–°è¦: æ±ç”¨ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆãƒ¡ãƒ‹ãƒ¥ãƒ¼ï¼ˆcreatePortalã€ç”»é¢ç«¯è‡ªå‹•èª¿æ•´ã€ESCã§é–‰ã˜ã‚‹ï¼‰ |
| `src/pages/ViewerPage.tsx` | ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆãƒ¡ãƒ‹ãƒ¥ãƒ¼çµ±åˆï¼ˆå³ã‚¯ãƒªãƒƒã‚¯ + Spaceã‚­ãƒ¼ï¼‰ |
| `src-tauri/src/commands/clipboard.rs` | ã‚°ãƒ­ãƒ¼ãƒãƒ«Clipboardã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã«å¤‰æ›´ï¼ˆLinux/X11å¯¾ç­–ï¼‰ |

ãƒ¡ãƒ‹ãƒ¥ãƒ¼é …ç›®:
- ã‚³ãƒ”ãƒ¼ï¼ˆç”»åƒã‚’ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ”ãƒ¼ï¼‰
- ãƒ‘ã‚¹ã‚’ã‚³ãƒ”ãƒ¼ï¼ˆãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹ã‚’ã‚³ãƒ”ãƒ¼ï¼‰
- æ°´å¹³åè»¢: ON/OFF
- ã‚·ãƒ£ãƒƒãƒ•ãƒ«: ON/OFF
- ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã«æˆ»ã‚‹
- çµ‚äº†ï¼ˆ`getCurrentWindow().close()`ï¼‰

Linux/X11å¯¾ç­–:
- `arboard::Clipboard` ã‚’ `once_cell::sync::Lazy<Mutex<Clipboard>>` ã§ã‚°ãƒ­ãƒ¼ãƒãƒ«ã«ä¿æŒ
- é–¢æ•°çµ‚äº†æ™‚ã®Clipboardãƒ‰ãƒ­ãƒƒãƒ—ã«ã‚ˆã‚‹ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰å†…å®¹æ¶ˆå¤±ã‚’é˜²æ­¢

**Step 8: çŠ¶æ…‹ä¿å­˜ãƒ»å¾©å…ƒ âœ… å®Œäº†**
| ãƒ•ã‚¡ã‚¤ãƒ« | å¤‰æ›´å†…å®¹ |
|---------|---------|
| `src/store/profileStore.ts` | `updateAppState(partial)` ãƒ¡ã‚½ãƒƒãƒ‰è¿½åŠ ï¼ˆappStateã®éƒ¨åˆ†æ›´æ–°ï¼‰ |
| `src/pages/ViewerPage.tsx` | çŠ¶æ…‹å¤‰åŒ–æ™‚ã«appStateã‚’æ›´æ–°ã—ã¦ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«ä¿å­˜ |
| `src/pages/IndexPage.tsx` | èµ·å‹•æ™‚ã«appState.lastPageã‚’ç¢ºèªã—ã¦ViewerPageã¸å¾©å…ƒé·ç§» |
| `src-tauri/capabilities/default.json` | `core:window:allow-close`, `core:window:allow-destroy` ãƒ‘ãƒ¼ãƒŸãƒƒã‚·ãƒ§ãƒ³è¿½åŠ  |

ä¿å­˜ã™ã‚‹çŠ¶æ…‹:
- `lastPage: "viewer"` / `"index"`
- `lastCardId`: è¡¨ç¤ºä¸­ã®ã‚«ãƒ¼ãƒ‰ID
- `lastImageIndex`: ç¾åœ¨ã®ç”»åƒã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ï¼ˆã‚·ãƒ£ãƒƒãƒ•ãƒ«æ™‚ã¯å…ƒã®ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‚’ä¿å­˜ï¼‰
- `hFlipEnabled`, `shuffleEnabled`

ä¿å­˜ã‚¿ã‚¤ãƒŸãƒ³ã‚°:
- æ–°ã—ã„ç”»åƒã‚’è¡¨ç¤ºã—ãŸã¨ãï¼ˆ`actualIndex`ã®å¤‰åŒ–ã‚’ç›£è¦–ï¼‰
- H-Flip / ã‚·ãƒ£ãƒƒãƒ•ãƒ«ã‚’ãƒˆã‚°ãƒ«ã—ãŸã¨ãï¼ˆ`hFlipEnabled`, `shuffleEnabled`ã®å¤‰åŒ–ã‚’ç›£è¦–ï¼‰
- ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ãƒšãƒ¼ã‚¸ã«æˆ»ã£ãŸã¨ãï¼ˆ`lastPage: "index"`ã§ä¿å­˜ï¼‰
- çµ‚äº†æ™‚ã®ä¿å­˜ã¯ä¸è¦ï¼ˆä¸Šè¨˜ã‚¿ã‚¤ãƒŸãƒ³ã‚°ä»¥é™ã‚¢ãƒ—ãƒªçµ‚äº†ã¾ã§çŠ¶æ…‹å¤‰åŒ–ãŒãªã„ãŸã‚ï¼‰
- åˆå›èª­ã¿è¾¼ã¿æ™‚ï¼ˆ`loadImages`ç›´å¾Œï¼‰ã¯`isInitialLoadRef`ã§ã‚¹ã‚­ãƒƒãƒ—ã—ã€ä¸è¦ãªä¿å­˜ã‚’å›é¿

å¾©å…ƒå‹•ä½œ:
- IndexPageè¡¨ç¤ºæ™‚ã«appState.lastPageãŒ`"viewer"`ã‹ã¤è©²å½“ã‚«ãƒ¼ãƒ‰ãŒå­˜åœ¨ã™ã‚‹å ´åˆã€ViewerPageã¸ç›´æ¥é·ç§»
- `loadImages`ã«å‰å›ã®ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ãƒ»H-Flipãƒ»ShuffleçŠ¶æ…‹ã‚’æ¸¡ã—ã¦å¾©å…ƒ
- è©²å½“ã‚«ãƒ¼ãƒ‰ãŒå‰Šé™¤ã•ã‚Œã¦ã„ã‚‹å ´åˆã¯IndexPageã§èµ·å‹•ï¼ˆãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ï¼‰

æ³¨æ„äº‹é …:
- Tauri v2ã§ã¯`getCurrentWindow().close()`ã«`core:window:allow-close`ã¨`core:window:allow-destroy`ã®ä¸¡æ–¹ã®ãƒ‘ãƒ¼ãƒŸãƒƒã‚·ãƒ§ãƒ³ãŒå¿…è¦

#### Phase 4 æ–°è¦ãƒ•ã‚¡ã‚¤ãƒ«ä¸€è¦§

```
src/components/
â”œâ”€â”€ common/
â”‚   â””â”€â”€ ContextMenu.tsx
â””â”€â”€ viewer/
    â””â”€â”€ ImageDisplay.tsx

src/store/
â””â”€â”€ viewerStore.ts

src-tauri/src/commands/
â””â”€â”€ clipboard.rs
```

#### Phase 4 å®Ÿè£…æ™‚ã®æ³¨æ„äº‹é …

1. **ç”»åƒèª­ã¿è¾¼ã¿**: å¤§ããªç”»åƒã¯ãƒ¡ãƒ¢ãƒªã‚’æ¶ˆè²»ã™ã‚‹ãŸã‚ã€è¡¨ç¤ºã‚µã‚¤ã‚ºã«å¿œã˜ãŸæœ€é©åŒ–ã‚’æ¤œè¨
2. **ã‚·ãƒ£ãƒƒãƒ•ãƒ«çŠ¶æ…‹**: ã‚·ãƒ£ãƒƒãƒ•ãƒ«ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã¯ã‚»ãƒƒã‚·ãƒ§ãƒ³ä¸­ã®ã¿ä¿æŒï¼ˆãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«ã«ã¯ä¿å­˜ã—ãªã„ï¼‰
3. **H-Flip**: CSSã®transformã§å®Ÿè£…ã€ç”»åƒãƒ‡ãƒ¼ã‚¿è‡ªä½“ã¯å¤‰æ›´ã—ãªã„
4. **ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆãƒ¡ãƒ‹ãƒ¥ãƒ¼**: å³ã‚¯ãƒªãƒƒã‚¯ã¨Spaceã‚­ãƒ¼ã®ä¸¡æ–¹ã§è¡¨ç¤º
5. **çŠ¶æ…‹ä¿å­˜ã‚¿ã‚¤ãƒŸãƒ³ã‚°**: ç”»åƒè¡¨ç¤ºå¤‰æ›´æ™‚ã€H-Flip/Shuffleãƒˆã‚°ãƒ«æ™‚ã€IndexPageã¸æˆ»ã‚‹æ™‚ã«ä¿å­˜ï¼ˆçµ‚äº†æ™‚ã®ä¿å­˜ã¯ä¸è¦ï¼‰
6. **Tauri v2ãƒ‘ãƒ¼ãƒŸãƒƒã‚·ãƒ§ãƒ³**: `getCurrentWindow().close()`ã«ã¯`core:window:allow-close`ã¨`core:window:allow-destroy`ã®ä¸¡æ–¹ãŒå¿…è¦

### Phase 5: ä»•ä¸Šã’

#### 5.1 ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°æ”¹å–„

| é …ç›® | ç¾çŠ¶ | å¯¾å¿œå†…å®¹ | å¯¾è±¡ãƒ•ã‚¡ã‚¤ãƒ« |
|------|------|---------|------------|
| ã‚«ãƒ¼ãƒ‰è¿½åŠ ãƒ¢ãƒ¼ãƒ€ãƒ«ã®ã‚¨ãƒ©ãƒ¼è¡¨ç¤º | `console.error`ã®ã¿ã€UIãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ãªã— | ãƒ¢ãƒ¼ãƒ€ãƒ«å†…ã«ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¡¨ç¤ºã‚¨ãƒªã‚¢è¿½åŠ  | `CardAddModal.tsx` |
| ã‚«ãƒ¼ãƒ‰ç·¨é›†ãƒ¢ãƒ¼ãƒ€ãƒ«ã®ã‚¨ãƒ©ãƒ¼è¡¨ç¤º | åŒä¸Š | åŒä¸Š | `CardEditModal.tsx` |
| ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«ä¿å­˜å¤±æ•—ã®é€šçŸ¥ | `console.error`ã®ã¿ | ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¸ã®é€šçŸ¥ï¼ˆãƒˆãƒ¼ã‚¹ãƒˆã¾ãŸã¯ãƒãƒŠãƒ¼ï¼‰ | `ViewerPage.tsx`, `IndexPage.tsx` |
| ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã‚³ãƒ”ãƒ¼çµæœã®é€šçŸ¥ | æˆåŠŸ/å¤±æ•—ã¨ã‚‚ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ãªã— | æˆåŠŸæ™‚ãƒ»å¤±æ•—æ™‚ã®ãƒˆãƒ¼ã‚¹ãƒˆé€šçŸ¥ | `ViewerPage.tsx` |
| ClipboardåˆæœŸåŒ–ã‚¨ãƒ©ãƒ¼ | `expect()`ã§ãƒ‘ãƒ‹ãƒƒã‚¯ | `Result`ã§è¿”å´ã—ã€ã‚³ãƒãƒ³ãƒ‰å®Ÿè¡Œæ™‚ã«ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¿”å´ | `clipboard.rs` |
| ãƒ€ã‚¤ã‚¢ãƒ­ã‚°ã‚­ãƒ£ãƒ³ã‚»ãƒ«ã®åŒºåˆ¥ | ã‚«ãƒ¼ãƒ‰è¿½åŠ æ™‚ã«ã‚­ãƒ£ãƒ³ã‚»ãƒ«ã™ã‚‹ã¨ãƒ¢ãƒ¼ãƒ€ãƒ«ãŒé–‰ã˜ã‚‹ | ã‚­ãƒ£ãƒ³ã‚»ãƒ«æ™‚ã¯ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’ç¶­æŒ | `CardAddModal.tsx` |
| ãƒ“ãƒ¥ãƒ¼ã‚¢å¾©å…ƒæ™‚ã®ãƒ•ã‚¡ã‚¤ãƒ«ä¸ä¸€è‡´ | ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ç•ªå·ã§ä½ç½®ã‚’ä¿å­˜ã—ã¦ã„ã‚‹ãŸã‚ã€ãƒ•ã‚¡ã‚¤ãƒ«æ§‹æˆå¤‰åŒ–æ™‚ã«åˆ¥ç”»åƒãŒè¡¨ç¤ºã•ã‚Œã‚‹ | `lastImageFilename`ã‚’è¿½åŠ ä¿å­˜ã—ã€å¾©å…ƒæ™‚ã«ãƒ•ã‚¡ã‚¤ãƒ«åã§ãƒãƒƒãƒãƒ³ã‚°ã€‚ä¸ä¸€è‡´æ™‚ã¯ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¡¨ç¤ºå¾ŒIndexPageã«æˆ»ã‚‹ | `types/index.ts`, `viewerStore.ts`, `ViewerPage.tsx`, `profileStore.ts`, `profile.rs` |
| ãƒ“ãƒ¥ãƒ¼ã‚¢å¾©å…ƒæ™‚ã®ãƒ•ã‚©ãƒ«ãƒ€ä¸å­˜åœ¨ | ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã¯è¡¨ç¤ºã•ã‚Œã‚‹ãŒã€ViewerPageã«ç•™ã¾ã£ãŸã¾ã¾ | ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¡¨ç¤ºå¾Œã«è‡ªå‹•ã§IndexPageã«æˆ»ã‚‹ | `ViewerPage.tsx` |

#### 5.2 ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–

| é …ç›® | ç¾çŠ¶ | å¯¾å¿œå†…å®¹ | å¯¾è±¡ãƒ•ã‚¡ã‚¤ãƒ« |
|------|------|---------|------------|
| ãƒ‡ã‚£ã‚¹ã‚¯ã‚µãƒ ãƒã‚¤ãƒ«ã‚­ãƒ£ãƒƒã‚·ãƒ¥ âœ… | `app_cache_dir()/thumbnails/`ã«JPEGä¿å­˜æ¸ˆã¿ | SHA-256ãƒãƒƒã‚·ãƒ¥ã‚’ãƒ•ã‚¡ã‚¤ãƒ«åã«ä½¿ç”¨ã€‚å…ƒç”»åƒã®mtimeã§ã‚­ãƒ£ãƒƒã‚·ãƒ¥æœ‰åŠ¹æ€§ã‚’åˆ¤å®šã€‚ãƒ¡ãƒ¢ãƒªâ†’ãƒ‡ã‚£ã‚¹ã‚¯â†’ç”Ÿæˆã®3å±¤ã‚­ãƒ£ãƒƒã‚·ãƒ¥ | `images.rs`, `Cargo.toml`ï¼ˆsha2è¿½åŠ ï¼‰ |
| åŒæ™‚ãƒªã‚¯ã‚¨ã‚¹ãƒˆåˆ¶å¾¡ï¼ˆä½å„ªå…ˆï¼‰ | åˆ¶å¾¡ãªã—ï¼ˆã‚«ãƒ¼ãƒ‰æ•°åˆ†åŒæ™‚ç™ºè¡Œï¼‰ | åŒæ™‚å®Ÿè¡Œæ•°ã‚’åˆ¶é™ã™ã‚‹ã‚­ãƒ¥ãƒ¼ï¼ˆ4ä¸¦åˆ—ç¨‹åº¦ï¼‰ | æ–°è¦ `thumbnailCache.ts` |
| å¤§é‡ã‚«ãƒ¼ãƒ‰æ™‚ã®ä»®æƒ³ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ« | å…¨ã‚«ãƒ¼ãƒ‰åŒæ™‚ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚° | React Windowç­‰ã§å¯è¦–ç¯„å›²ã®ã¿ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚° | `CardGrid.tsx` |
| ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã‚µãƒ ãƒã‚¤ãƒ«ã‚­ãƒ£ãƒƒã‚·ãƒ¥ï¼ˆä½å„ªå…ˆï¼‰ | ãªã—ï¼ˆRustå´ãƒ¡ãƒ¢ãƒª+ãƒ‡ã‚£ã‚¹ã‚¯ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã§ååˆ†é«˜é€Ÿï¼‰ | ãƒ‡ã‚£ã‚¹ã‚¯ã‚­ãƒ£ãƒƒã‚·ãƒ¥å°å…¥ã«ã‚ˆã‚ŠIPCå¾€å¾©ï¼ˆ~0.1msï¼‰ã®å‰Šæ¸›ã®ã¿ãŒåŠ¹æœã€‚ã‚«ãƒ¼ãƒ‰200æšè¶…ã§ãªã‘ã‚Œã°ä¸è¦ | æ–°è¦ `thumbnailCache.ts`, `CardItem.tsx` |

#### 5.3 UI/UXèª¿æ•´

| é …ç›® | ç¾çŠ¶ | å¯¾å¿œå†…å®¹ | å¯¾è±¡ãƒ•ã‚¡ã‚¤ãƒ« |
|------|------|---------|------------|
| å‰Šé™¤ç¢ºèªãƒ€ã‚¤ã‚¢ãƒ­ã‚° | `window.confirm`ä½¿ç”¨ | ã‚«ã‚¹ã‚¿ãƒ Confirmãƒ¢ãƒ¼ãƒ€ãƒ«ã«çµ±ä¸€ | `IndexPage.tsx`, `Modal.tsx` |
| ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆãƒ¡ãƒ‹ãƒ¥ãƒ¼ã®ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰æ“ä½œ | ESCã®ã¿å¯¾å¿œ | çŸ¢å°ã‚­ãƒ¼ä¸Šä¸‹ã§é …ç›®é¸æŠã€Enterã§å®Ÿè¡Œ | `ContextMenu.tsx` |
| IndexPageã®ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆä¸è¶³ | Ctrl+O, Ctrl+Shift+S æœªå®Ÿè£… | ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é–‹ãã€åˆ¥åä¿å­˜ã®ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆè¿½åŠ  | `IndexPage.tsx` |
| IndexPageã®ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆãƒ˜ãƒ«ãƒ— | è¡¨ç¤ºãªã— | ãƒ•ãƒƒã‚¿ãƒ¼ã¾ãŸã¯ãƒ˜ãƒ«ãƒ—ãƒ‘ãƒãƒ«ã§è¡¨ç¤º | `IndexPage.tsx` |
| ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¡¨ç¤ºã®çµ±ä¸€ | IndexPageã¯ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¡¨ç¤ºãªã—ã€‚ViewerPageãƒ»CardItemã¯ãƒ†ã‚­ã‚¹ãƒˆã®ã¿ | å…±é€šã®ã‚¹ãƒ”ãƒŠãƒ¼ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’ä½œæˆã—ã€ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«èª­ã¿è¾¼ã¿ãƒ»ä¿å­˜ãƒ»ç”»åƒèª­ã¿è¾¼ã¿ãƒ»ã‚µãƒ ãƒã‚¤ãƒ«å–å¾—ä¸­ã«å›è»¢ã‚¢ã‚¤ã‚³ãƒ³ã‚’è¡¨ç¤º | æ–°è¦ `Spinner.tsx`, `IndexPage.tsx`, `ViewerPage.tsx`, `CardItem.tsx`, `ProfileSelector.tsx` |
| ãƒ“ãƒ¥ãƒ¼ã‚¢ã®ã‚ºãƒ¼ãƒ æ©Ÿèƒ½ âœ… | å®Ÿè£…æ¸ˆã¿ | ã‚ºãƒ¼ãƒ ç‡ï¼å…ƒç”»åƒåŸºæº–ï¼ˆ100%ï¼åŸå¯¸ï¼‰ã€‚`+`/`=`ã§Ã—1.2ã‚ºãƒ¼ãƒ ã‚¤ãƒ³ã€`-`ã§Ã—0.8ã‚ºãƒ¼ãƒ ã‚¢ã‚¦ãƒˆã€`0`ã§ãƒ•ã‚£ãƒƒãƒˆãƒªã‚»ãƒƒãƒˆã€‚ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ã‚ºãƒ¼ãƒ æ™‚ã¯ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã‚’åŒæ–¹å‘ãƒªã‚µã‚¤ã‚ºï¼ˆãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—ä¸Šé™/200pxä¸‹é™ï¼‰ã€‚æ‰‹å‹•ãƒªã‚µã‚¤ã‚ºæ™‚ã¯ã‚ºãƒ¼ãƒ ç‡ã‚’å†è¨ˆç®—ã€‚æœ€å¤§400%ã€‚è©³ç´°ã¯ [design-zoom.md](./design-zoom.md) ã‚’å‚ç…§ | `ViewerPage.tsx`, `ImageDisplay.tsx`, `viewerStore.ts`, `tauri.conf.json` |

#### 5.4 çŠ¶æ…‹ä¿å­˜ã®æ‹¡å¼µ âœ… å®Œäº†

| é …ç›® | çŠ¶æ…‹ | å¯¾å¿œå†…å®¹ | å¯¾è±¡ãƒ•ã‚¡ã‚¤ãƒ« |
|------|------|---------|------------|
| ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ä½ç½®ãƒ»ã‚µã‚¤ã‚ºã®ä¿å­˜ | âœ… å®Ÿè£…æ¸ˆã¿ | ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ä½ç½®ãƒ»ã‚µã‚¤ã‚ºã‚’appStateã«ä¿å­˜ã—èµ·å‹•æ™‚ã«å¾©å…ƒ | `App.tsx`, `IndexPage.tsx`, `default.json` |

**å®Ÿè£…è©³ç´°**:

ä¿å­˜ï¼ˆ`App.tsx`ï¼‰:
- `onCloseRequested` ãƒãƒ³ãƒ‰ãƒ©ã§ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦çµ‚äº†æ™‚ã« `outerPosition`/`outerSize` ã‚’å–å¾—
- `scaleFactor` ã§è«–ç†åº§æ¨™ã«å¤‰æ›ã—ã€appState.window ã«ä¿å­˜ã—ã¦ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒ‡ã‚£ã‚¹ã‚¯ã«æ›¸ãå‡ºã—
- ä¿å­˜ã¯çµ‚äº†æ™‚ã®1å›ã®ã¿ï¼ˆãƒªã‚µã‚¤ã‚ºä¸­ã® I/O è² è·ã‚’å›é¿ï¼‰

å¾©å…ƒï¼ˆ`IndexPage.tsx`ï¼‰:
- çŠ¶æ…‹å¾©å…ƒ useEffect å†…ã§ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã‚µã‚¤ã‚ºãƒ»ä½ç½®ã‚’å¾©å…ƒ
- ã‚µã‚¤ã‚ºã¯å¸¸ã«å¾©å…ƒï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ 1280Ã—800 ã§ã‚‚å•é¡Œãªã—ï¼‰
- ä½ç½®ã¯ `x !== null && y !== null` ã®å ´åˆã®ã¿å¾©å…ƒï¼ˆåˆå›èµ·å‹•æ™‚ã¯ OS ã«é…ç½®ã‚’å§”ã­ã‚‹ï¼‰
- ãƒ¢ãƒ‹ã‚¿ãƒ¼ç¯„å›²å¤–ãƒã‚§ãƒƒã‚¯: ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦å·¦ä¸Š +100px ãŒãƒ¢ãƒ‹ã‚¿ãƒ¼å†…ã«åã¾ã‚‰ãªã„å ´åˆã¯ä½ç½®å¾©å…ƒã‚’ã‚¹ã‚­ãƒƒãƒ—ï¼ˆå¤–éƒ¨ãƒ‡ã‚£ã‚¹ãƒ—ãƒ¬ã‚¤å–ã‚Šå¤–ã—ç­‰ã¸ã®å¯¾ç­–ï¼‰

ãƒ‘ãƒ¼ãƒŸãƒƒã‚·ãƒ§ãƒ³ï¼ˆ`default.json`ï¼‰:
- `core:window:allow-outer-position`, `core:window:allow-outer-size`, `core:window:allow-set-position` ã‚’è¿½åŠ 

æ³¨æ„äº‹é …:
- `outerSize`/`outerPosition` ã‚’ä½¿ç”¨ â€” `setSize(LogicalSize)` ã¯ outer size ã‚’è¨­å®šã™ã‚‹ãŸã‚ã€ä¿å­˜ãƒ»å¾©å…ƒã§ä¸€è‡´
- ViewerPage ã®ã‚ºãƒ¼ãƒ æ©Ÿèƒ½ã¨ã®ç«¶åˆãªã—ï¼ˆIndexPage ã§å¾©å…ƒ â†’ ViewerPage é·ç§» â†’ ãƒ•ã‚£ãƒƒãƒˆã‚ºãƒ¼ãƒ è¨ˆç®—ã®é †åºã§è‡ªç„¶ã«å‹•ä½œï¼‰
- Wayland ç’°å¢ƒã§ã¯ `outerPosition()` ãŒ (0,0) ã‚’è¿”ã™å¯èƒ½æ€§ã‚ã‚Šã€‚ä¿å­˜ã¯å•é¡Œãªã—ã€å¾©å…ƒæ™‚ã« (0,0) ã‚’è¨­å®šã—ã¦ã‚‚ WM ãŒé…ç½®ã‚’èª¿æ•´

#### 5.5 ã‚¯ãƒ­ã‚¹ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ 

| é …ç›® | å¯¾å¿œå†…å®¹ |
|------|---------|
| Windows/macOS/Linuxãƒ“ãƒ«ãƒ‰ç¢ºèª | å„ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã§ãƒ“ãƒ«ãƒ‰ãƒ»å‹•ä½œç¢ºèª |
| ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹ã®è¡¨ç¤º | ãƒ‘ã‚¹åŒºåˆ‡ã‚Šæ–‡å­—ã®é•ã„ã‚’ç¢ºèª |
| ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰å‹•ä½œç¢ºèª | arboardã®å„ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ å‹•ä½œç¢ºèªï¼ˆç‰¹ã«Waylandï¼‰ |

---

## 10. æ¤œè¨äº‹é …ãƒ»æœªæ±ºå®šé …ç›®

### 10.1 è¦æ¤œè¨
- [ ] ã‚¿ã‚°æ©Ÿèƒ½ã®ã‚¹ã‚³ãƒ¼ãƒ—ï¼ˆPhase 1ã§ã¯è¦‹é€ã‚Šï¼Ÿï¼‰
- [ ] ã‚µãƒ ãƒã‚¤ãƒ«ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã®ä¿å­˜å ´æ‰€ï¼ˆã‚¢ãƒ—ãƒªãƒ‡ãƒ¼ã‚¿ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªï¼Ÿï¼‰
- [ ] å¯¾å¿œç”»åƒãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆï¼ˆJPEG, PNG, GIF, WebP, AVIF?ï¼‰
- [ ] å¤§é‡ç”»åƒãƒ•ã‚©ãƒ«ãƒ€ã®ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹å¯¾ç­–ï¼ˆä»®æƒ³ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ç­‰ï¼‰
- [ ] ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«ãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³äº’æ›æ€§ï¼ˆãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³æˆ¦ç•¥ï¼‰
- [ ] å±¥æ­´ã®æœ€å¤§ä¿æŒæ•°ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ10ä»¶ï¼‰
- [ ] **ã‚¢ãƒ—ãƒªè­˜åˆ¥å­ï¼ˆidentifierï¼‰ã®å¤‰æ›´**: ç¾åœ¨ `org.example.image-folder-viewer`ï¼ˆ`src-tauri/tauri.conf.json`ï¼‰ã‚’ä½¿ç”¨ä¸­ã€‚ãƒªãƒªãƒ¼ã‚¹å‰ã«æ­£å¼ãªãƒ‰ãƒ¡ã‚¤ãƒ³ã«å¤‰æ›´ãŒå¿…è¦ã€‚å¤‰æ›´æ™‚ã¯ `app_data_dir()` / `app_cache_dir()` ã®ãƒ‘ã‚¹ãŒå¤‰ã‚ã‚‹ãŸã‚ã€æ—¢å­˜ãƒ‡ãƒ¼ã‚¿ã®ç§»è¡Œã‚’è€ƒæ…®ã™ã‚‹ã“ã¨

### 10.2 å°†æ¥çš„ãªæ‹¡å¼µæ¡ˆ
- è¤‡æ•°ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦å¯¾å¿œ
- ç”»åƒã®ãŠæ°—ã«å…¥ã‚Šæ©Ÿèƒ½
- å¤–éƒ¨ã‚µãƒ¼ãƒ“ã‚¹é€£æºï¼ˆã‚¯ãƒ©ã‚¦ãƒ‰ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ç­‰ï¼‰
- ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚·ã‚¹ãƒ†ãƒ 
- ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«ã®è‡ªå‹•ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—æ©Ÿèƒ½

---

## ä»˜éŒ²A: ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆ

### ViewerPage

| ã‚­ãƒ¼ | æ©Ÿèƒ½ |
|------|------|
| `â†` | å‰ã®ç”»åƒ |
| `â†’` | æ¬¡ã®ç”»åƒ |
| `+` / `=` | ã‚ºãƒ¼ãƒ ã‚¤ãƒ³ï¼ˆÃ—1.2ã€ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦æ‹¡å¤§ï¼‰ |
| `-` | ã‚ºãƒ¼ãƒ ã‚¢ã‚¦ãƒˆï¼ˆÃ—0.8ã€ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ç¸®å°ï¼‰ |
| `0` | ã‚ºãƒ¼ãƒ ãƒªã‚»ãƒƒãƒˆï¼ˆãƒ•ã‚£ãƒƒãƒˆè¡¨ç¤ºã«æˆ»ã™ï¼‰ |
| `H` | æ°´å¹³åè»¢ãƒˆã‚°ãƒ« |
| `R` | ã‚·ãƒ£ãƒƒãƒ•ãƒ«ãƒˆã‚°ãƒ« |
| `Space` | ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆãƒ¡ãƒ‹ãƒ¥ãƒ¼è¡¨ç¤º |
| `Q` | ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã«æˆ»ã‚‹ / ã‚¢ãƒ—ãƒªçµ‚äº† |
| `Escape` | ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã«æˆ»ã‚‹ |
| `I` | ç”»åƒæƒ…å ±è¡¨ç¤ºï¼ˆä»»æ„ï¼‰ |
| `F` | ãƒ•ãƒ«ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ï¼ˆä»»æ„ï¼‰ |

### IndexPage

| ã‚­ãƒ¼ | æ©Ÿèƒ½ |
|------|------|
| `â†‘` / `â†“` / `â†` / `â†’` | ã‚«ãƒ¼ãƒ‰é¸æŠç§»å‹• |
| `Enter` | é¸æŠã‚«ãƒ¼ãƒ‰ã‚’é–‹ã |
| `Delete` | é¸æŠã‚«ãƒ¼ãƒ‰ã‚’å‰Šé™¤ |
| `Ctrl+N` | æ–°è¦ã‚«ãƒ¼ãƒ‰è¿½åŠ  |
| `Ctrl+O` | åˆ¥ã®ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é–‹ã |
| `Ctrl+S` | ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«ä¿å­˜ |
| `Ctrl+Shift+S` | åˆ¥åã§ä¿å­˜ |
| `Q` | ã‚¢ãƒ—ãƒªçµ‚äº† |

---

## ä»˜éŒ²B: ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆãƒ¡ãƒ‹ãƒ¥ãƒ¼

### ViewerPage ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆãƒ¡ãƒ‹ãƒ¥ãƒ¼

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Copy                â”‚  â† ç”»åƒã‚’ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ”ãƒ¼
â”‚ Copy Path           â”‚  â† ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹ã‚’ã‚³ãƒ”ãƒ¼
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ H-Flip ON/OFF       â”‚  â† æ°´å¹³åè»¢ãƒˆã‚°ãƒ«ï¼ˆçŠ¶æ…‹è¡¨ç¤ºï¼‰
â”‚ Shuffle ON/OFF      â”‚  â† ã‚·ãƒ£ãƒƒãƒ•ãƒ«ãƒˆã‚°ãƒ«ï¼ˆçŠ¶æ…‹è¡¨ç¤ºï¼‰
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Zoom In         (+) â”‚  â† ã‚ºãƒ¼ãƒ ã‚¤ãƒ³ï¼ˆÃ—1.2ï¼‰
â”‚ Zoom Out        (-) â”‚  â† ã‚ºãƒ¼ãƒ ã‚¢ã‚¦ãƒˆï¼ˆÃ—0.8ï¼‰
â”‚ Zoom Reset      (0) â”‚  â† ãƒ•ã‚£ãƒƒãƒˆè¡¨ç¤ºã«ãƒªã‚»ãƒƒãƒˆ
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Back to Index       â”‚  â† ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ãƒšãƒ¼ã‚¸ã«æˆ»ã‚‹
â”‚ Quit                â”‚  â† ã‚¢ãƒ—ãƒªçµ‚äº†
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### IndexPage ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆãƒ¡ãƒ‹ãƒ¥ãƒ¼ï¼ˆã‚«ãƒ¼ãƒ‰ä¸Šã§å³ã‚¯ãƒªãƒƒã‚¯ï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Open                â”‚  â† ã‚«ãƒ¼ãƒ‰ã‚’é–‹ã
â”‚ Edit Title          â”‚  â† ã‚¿ã‚¤ãƒˆãƒ«ç·¨é›†
â”‚ Change Thumbnail    â”‚  â† ã‚µãƒ ãƒã‚¤ãƒ«å¤‰æ›´
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Delete              â”‚  â† ã‚«ãƒ¼ãƒ‰å‰Šé™¤
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### IndexPage ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆãƒ¡ãƒ‹ãƒ¥ãƒ¼ï¼ˆç©ºç™½éƒ¨åˆ†ã§å³ã‚¯ãƒªãƒƒã‚¯ï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Add New Card        â”‚  â† æ–°è¦ã‚«ãƒ¼ãƒ‰è¿½åŠ 
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Open Profile...     â”‚  â† åˆ¥ã®ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é–‹ã
â”‚ New Profile...      â”‚  â† æ–°è¦ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«ä½œæˆ
â”‚ Save As...          â”‚  â† åˆ¥åã§ä¿å­˜
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Quit                â”‚  â† ã‚¢ãƒ—ãƒªçµ‚äº†
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### IndexPage ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆãƒ¡ãƒ‹ãƒ¥ãƒ¼ï¼ˆã‚¨ãƒ©ãƒ¼çŠ¶æ…‹ã‚«ãƒ¼ãƒ‰ä¸Šã§å³ã‚¯ãƒªãƒƒã‚¯ï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Edit Path           â”‚  â† ãƒ•ã‚©ãƒ«ãƒ€ãƒ‘ã‚¹å¤‰æ›´
â”‚ Edit Title          â”‚  â† ã‚¿ã‚¤ãƒˆãƒ«ç·¨é›†
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Delete              â”‚  â† ã‚«ãƒ¼ãƒ‰å‰Šé™¤
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â€» ã€ŒOpenã€ã¯è¡¨ç¤ºã•ã‚Œãªã„ï¼ˆé–‹ã‘ãªã„ãŸã‚ï¼‰
```

---

## ä»˜éŒ²C: ã‚µãƒ ãƒã‚¤ãƒ«ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹åˆ†æ

### C.1 ç¾çŠ¶ã®å•é¡Œ

Phase 3å®Ÿè£…å¾Œã®å‹•ä½œç¢ºèªã«ãŠã„ã¦ã€ä»¥ä¸‹ã®ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹å•é¡ŒãŒç¢ºèªã•ã‚ŒãŸï¼š

- IndexPageè¡¨ç¤ºæ™‚ã®ã‚µãƒ ãƒã‚¤ãƒ«èª­ã¿è¾¼ã¿ãŒé…ã„
- ã‚«ãƒ¼ãƒ‰è¿½åŠ ãƒ¢ãƒ¼ãƒ€ãƒ«ã§ã®ã‚µãƒ ãƒã‚¤ãƒ«ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼è¡¨ç¤ºãŒé…ã„
- ã‚«ãƒ¼ãƒ‰ãŒå¢—ãˆã‚‹ã»ã©åˆæœŸè¡¨ç¤ºãŒé…ããªã‚‹

### C.2 åŸå› åˆ†æ

#### Rustå´ï¼ˆ`src-tauri/src/commands/images.rs`ï¼‰

| å•é¡Œ | è©³ç´° | å½±éŸ¿åº¦ |
|------|------|--------|
| **ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãªã—** | `get_thumbnail`ã¯æ¯å›ç”»åƒã‚’ãƒ•ãƒ«ãƒ‡ã‚³ãƒ¼ãƒ‰ãƒ»ãƒªã‚µã‚¤ã‚ºã—ã¦ã„ã‚‹ | é«˜ |
| **PNGã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰** | ã‚µãƒ ãƒã‚¤ãƒ«å‡ºåŠ›ã«PNGå½¢å¼ã‚’ä½¿ç”¨ã€‚PNGã¯ãƒ­ã‚¹ãƒ¬ã‚¹åœ§ç¸®ã®ãŸã‚ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰ãŒé…ã„ | é«˜ |
| **åŒæœŸå‡¦ç†** | ã‚³ãƒãƒ³ãƒ‰ãŒåŒæœŸå®Ÿè¡Œã®ãŸã‚ã€é‡ã„å‡¦ç†ãŒãƒ¡ã‚¤ãƒ³ã‚¹ãƒ¬ãƒƒãƒ‰ã‚’ãƒ–ãƒ­ãƒƒã‚¯ | ä¸­ |

```rust
// ç¾åœ¨ã®å®Ÿè£…ï¼ˆå•é¡Œç®‡æ‰€ï¼‰
let thumbnail = img.thumbnail(size, size);
thumbnail.write_to(&mut buffer, image::ImageFormat::Png)  // PNGã¯é…ã„
```

#### ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰å´ï¼ˆ`src/components/cards/CardItem.tsx`ï¼‰

| å•é¡Œ | è©³ç´° | å½±éŸ¿åº¦ |
|------|------|--------|
| **å€‹åˆ¥å–å¾—** | å„CardItemã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãŒuseEffectå†…ã§å€‹åˆ¥ã«ã‚µãƒ ãƒã‚¤ãƒ«ã‚’ãƒªã‚¯ã‚¨ã‚¹ãƒˆ | ä¸­ |
| **ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãªã—** | ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå†ãƒã‚¦ãƒ³ãƒˆæ™‚ã«æ¯å›Rustå´ã¸ãƒªã‚¯ã‚¨ã‚¹ãƒˆ | é«˜ |
| **åŒæ™‚ãƒªã‚¯ã‚¨ã‚¹ãƒˆ** | ã‚«ãƒ¼ãƒ‰ãŒå¤šã„å ´åˆã€å¤§é‡ã®åŒæ™‚ãƒªã‚¯ã‚¨ã‚¹ãƒˆãŒç™ºç”Ÿ | ä¸­ |

```typescript
// ç¾åœ¨ã®å®Ÿè£…ï¼ˆå„ã‚«ãƒ¼ãƒ‰ãŒå€‹åˆ¥ã«å–å¾—ï¼‰
useEffect(() => {
  getThumbnail(card.thumbnail, THUMBNAIL_SIZE).then(...)
}, [card.thumbnail, isValid]);
```

### C.3 æ”¹å–„ç­–

#### æ”¹å–„1: JPEGå‡ºåŠ›ã«å¤‰æ›´ï¼ˆå„ªå…ˆåº¦: é«˜ã€é›£æ˜“åº¦: ä½ï¼‰âœ… å®Ÿè£…æ¸ˆã¿

PNGã‹ã‚‰JPEGã«å¤‰æ›´ã™ã‚‹ã“ã¨ã§ã€ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰é€Ÿåº¦ãŒç´„5-10å€å‘ä¸Šã™ã‚‹ã€‚

```rust
// å®Ÿè£…æ¸ˆã¿ï¼ˆsrc-tauri/src/commands/images.rsï¼‰
thumbnail.write_to(&mut buffer, image::ImageFormat::Jpeg)
```

| é …ç›® | PNG | JPEG |
|------|-----|------|
| åœ§ç¸®æ–¹å¼ | ãƒ­ã‚¹ãƒ¬ã‚¹ | éå¯é€† |
| ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰é€Ÿåº¦ | é…ã„ | é€Ÿã„ |
| ãƒ•ã‚¡ã‚¤ãƒ«ã‚µã‚¤ã‚º | å¤§ãã„ | å°ã•ã„ |
| ç”»è³ª | å®Œå…¨ | ååˆ†ï¼ˆã‚µãƒ ãƒã‚¤ãƒ«ç”¨é€”ï¼‰ |

#### æ”¹å–„2: Rustå´ãƒ¡ãƒ¢ãƒªã‚­ãƒ£ãƒƒã‚·ãƒ¥ï¼ˆå„ªå…ˆåº¦: é«˜ã€é›£æ˜“åº¦: ä¸­ï¼‰âœ… å®Ÿè£…æ¸ˆã¿

åŒã˜ç”»åƒãƒ‘ã‚¹ãƒ»ã‚µã‚¤ã‚ºã®çµ„ã¿åˆã‚ã›ã«å¯¾ã—ã¦ã€ç”Ÿæˆæ¸ˆã¿ã‚µãƒ ãƒã‚¤ãƒ«ã‚’ãƒ¡ãƒ¢ãƒªã«ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã™ã‚‹ã€‚

```rust
// å®Ÿè£…æ¸ˆã¿ï¼ˆsrc-tauri/src/commands/images.rsï¼‰
use std::collections::HashMap;
use std::sync::Mutex;
use once_cell::sync::Lazy;

const MAX_CACHE_ENTRIES: usize = 200;

static THUMBNAIL_CACHE: Lazy<Mutex<ThumbnailCache>> =
    Lazy::new(|| Mutex::new(ThumbnailCache::new(MAX_CACHE_ENTRIES)));

// LRUé¢¨ã‚­ãƒ£ãƒƒã‚·ãƒ¥ï¼ˆæœ€å¤§200ã‚¨ãƒ³ãƒˆãƒªã€å¤ã„ã‚‚ã®ã‹ã‚‰å‰Šé™¤ï¼‰
struct ThumbnailCache {
    map: HashMap<(String, u32), String>,
    order: Vec<(String, u32)>,
    max_size: usize,
}
```

**å®Ÿè£…æ¸ˆã¿ã®æ©Ÿèƒ½**:
- æœ€å¤§200ã‚¨ãƒ³ãƒˆãƒªã®LRUé¢¨ã‚­ãƒ£ãƒƒã‚·ãƒ¥
- ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãƒ’ãƒƒãƒˆæ™‚ã¯å³åº§ã«è¿”å´ï¼ˆç”»åƒå‡¦ç†ã‚’ã‚¹ã‚­ãƒƒãƒ—ï¼‰

**æœªå®Ÿè£…ï¼ˆå°†æ¥æ¤œè¨ï¼‰**:
- ãƒ•ã‚¡ã‚¤ãƒ«æ›´æ–°æ™‚ã®ã‚­ãƒ£ãƒƒã‚·ãƒ¥ç„¡åŠ¹åŒ–

#### æ”¹å–„3: ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã‚­ãƒ£ãƒƒã‚·ãƒ¥ï¼ˆå„ªå…ˆåº¦: ä¸­ã€é›£æ˜“åº¦: ä¸­ï¼‰

ã‚µãƒ ãƒã‚¤ãƒ«URLã‚’ã‚°ãƒ­ãƒ¼ãƒãƒ«ãªMapã§ç®¡ç†ã—ã€å†å–å¾—ã‚’é˜²æ­¢ã™ã‚‹ã€‚

```typescript
// thumbnailCache.ts
const cache = new Map<string, string>();

export async function getCachedThumbnail(
  imagePath: string,
  size: number
): Promise<string | null> {
  const key = `${imagePath}:${size}`;

  if (cache.has(key)) {
    return cache.get(key)!;
  }

  const url = await getThumbnail(imagePath, size);
  cache.set(key, url);
  return url;
}
```

#### æ”¹å–„4: ãƒ‡ã‚£ã‚¹ã‚¯ã‚­ãƒ£ãƒƒã‚·ãƒ¥ï¼ˆå„ªå…ˆåº¦: ä½ã€é›£æ˜“åº¦: é«˜ï¼‰âœ… å®Ÿè£…æ¸ˆã¿

`app_cache_dir()/thumbnails/` é…ä¸‹ã«JPEGãƒ•ã‚¡ã‚¤ãƒ«ã¨ã—ã¦ä¿å­˜ã—ã€ã‚¢ãƒ—ãƒªå†èµ·å‹•å¾Œã‚‚é«˜é€Ÿã«èª­ã¿è¾¼ã‚€ã€‚

```
~/.cache/org.example.image-folder-viewer/thumbnails/
â”œâ”€â”€ <SHA-256>.jpg
â”œâ”€â”€ <SHA-256>.jpg
â””â”€â”€ ...
```

- ãƒ•ã‚¡ã‚¤ãƒ«åã¯ `SHA-256("{image_path}:{size}")` ã®ãƒãƒƒã‚·ãƒ¥å€¤ï¼ˆ`sha2`ã‚¯ãƒ¬ãƒ¼ãƒˆä½¿ç”¨ï¼‰
- å…ƒç”»åƒã®mtimeã¨ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãƒ•ã‚¡ã‚¤ãƒ«ã®mtimeã‚’æ¯”è¼ƒã—ã¦ã‚­ãƒ£ãƒƒã‚·ãƒ¥æœ‰åŠ¹æ€§ã‚’åˆ¤å®š
- `get_thumbnail` ã« `AppHandle` å¼•æ•°ã‚’è¿½åŠ ï¼ˆTauri v2ãŒè‡ªå‹•æ³¨å…¥ã€ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰å¤‰æ›´ä¸è¦ï¼‰
- ãƒ‡ã‚£ã‚¹ã‚¯I/Oã‚¨ãƒ©ãƒ¼æ™‚ã¯ã‚µã‚¤ãƒ¬ãƒ³ãƒˆã«ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ï¼ˆãƒ¡ãƒ¢ãƒªã‚­ãƒ£ãƒƒã‚·ãƒ¥+æ¯å›ç”Ÿæˆã§å‹•ä½œï¼‰
- ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãƒ•ãƒ­ãƒ¼: ãƒ¡ãƒ¢ãƒªã‚­ãƒ£ãƒƒã‚·ãƒ¥ â†’ ãƒ‡ã‚£ã‚¹ã‚¯ã‚­ãƒ£ãƒƒã‚·ãƒ¥ â†’ ã‚µãƒ ãƒã‚¤ãƒ«ç”Ÿæˆ ã®3å±¤æ§‹é€ 
- ãƒ‡ã‚£ã‚¹ã‚¯ãƒ’ãƒƒãƒˆæ™‚ã¯ãƒ¡ãƒ¢ãƒªã‚­ãƒ£ãƒƒã‚·ãƒ¥ã«ã‚‚æ ¼ç´ã—ã€2å›ç›®ä»¥é™ã®ã‚¢ã‚¯ã‚»ã‚¹ã§ãƒ•ã‚¡ã‚¤ãƒ«I/Oä¸è¦

#### æ”¹å–„5: ä¸¦åˆ—å‡¦ç†ã®åˆ¶å¾¡ï¼ˆå„ªå…ˆåº¦: ä½ã€é›£æ˜“åº¦: ä¸­ï¼‰

åŒæ™‚ãƒªã‚¯ã‚¨ã‚¹ãƒˆæ•°ã‚’åˆ¶é™ã—ã€ã‚·ã‚¹ãƒ†ãƒ ãƒªã‚½ãƒ¼ã‚¹ã®éè² è·ã‚’é˜²æ­¢ã™ã‚‹ã€‚

```typescript
// åŒæ™‚å®Ÿè¡Œæ•°ã‚’åˆ¶é™ã™ã‚‹ã‚­ãƒ¥ãƒ¼
class ThumbnailQueue {
  private queue: Array<() => Promise<void>> = [];
  private running = 0;
  private maxConcurrent = 4;

  async add<T>(task: () => Promise<T>): Promise<T> {
    // ã‚­ãƒ¥ãƒ¼ç®¡ç†ãƒ­ã‚¸ãƒƒã‚¯...
  }
}
```

### C.4 å®Ÿè£…çŠ¶æ³

| é †ä½ | æ”¹å–„ç­– | æœŸå¾…åŠ¹æœ | å·¥æ•° | çŠ¶æ…‹ |
|------|--------|----------|------|------|
| 1 | JPEGå‡ºåŠ›ã«å¤‰æ›´ | ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰5-10å€é«˜é€ŸåŒ– | å° | âœ… å®Ÿè£…æ¸ˆã¿ |
| 2 | Rustå´ãƒ¡ãƒ¢ãƒªã‚­ãƒ£ãƒƒã‚·ãƒ¥ | åŒä¸€ç”»åƒã®å†å‡¦ç†é˜²æ­¢ | ä¸­ | âœ… å®Ÿè£…æ¸ˆã¿ |
| 3 | ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã‚­ãƒ£ãƒƒã‚·ãƒ¥ | å†ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°æ™‚ã®å†å–å¾—é˜²æ­¢ | ä¸­ | ä½å„ªå…ˆï¼ˆãƒ‡ã‚£ã‚¹ã‚¯ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã§ååˆ†ï¼‰ |
| 4 | ãƒ‡ã‚£ã‚¹ã‚¯ã‚­ãƒ£ãƒƒã‚·ãƒ¥ | ã‚¢ãƒ—ãƒªå†èµ·å‹•å¾Œã‚‚é«˜é€Ÿ | ä¸­ | âœ… å®Ÿè£…æ¸ˆã¿ |
| 5 | ä¸¦åˆ—å‡¦ç†ã®åˆ¶å¾¡ | å¤§é‡ã‚«ãƒ¼ãƒ‰æ™‚ã®å®‰å®šæ€§å‘ä¸Š | ä¸­ | æœªå®Ÿè£… |

### C.5 å®Ÿè£…ã‚¹ãƒ†ãƒƒãƒ—æ¡ˆ

**Step 1: å³åŠ¹æ€§ã®ã‚ã‚‹æ”¹å–„** âœ… å®Œäº†
- [x] JPEGå‡ºåŠ›ã«å¤‰æ›´
- [x] Rustå´ãƒ¡ãƒ¢ãƒªã‚­ãƒ£ãƒƒã‚·ãƒ¥ï¼ˆLRUé¢¨ã€æœ€å¤§200ã‚¨ãƒ³ãƒˆãƒªï¼‰

**Step 2: ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰æ”¹å–„**ï¼ˆæœªå®Ÿè£…ãƒ»å¿…è¦ã«å¿œã˜ã¦å®Ÿæ–½ï¼‰
- [ ] ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã®å®Ÿè£…
- [ ] ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°çŠ¶æ…‹ã®æœ€é©åŒ–

**Step 3: æ°¸ç¶šåŒ–** âœ… å®Œäº†
- [x] ãƒ‡ã‚£ã‚¹ã‚¯ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã®å®Ÿè£…ï¼ˆ`app_cache_dir()/thumbnails/`ã€SHA-256ãƒãƒƒã‚·ãƒ¥ã€mtimeåˆ¤å®šï¼‰
- [ ] ã‚­ãƒ£ãƒƒã‚·ãƒ¥ç®¡ç†æ©Ÿèƒ½ï¼ˆã‚µã‚¤ã‚ºä¸Šé™ã€æœ‰åŠ¹æœŸé™ï¼‰
